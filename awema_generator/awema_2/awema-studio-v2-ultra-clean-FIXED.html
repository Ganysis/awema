<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWEMA Studio Pro v2.0 - Ultra Clean Fixed</title>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: #0f172a;
            color: #f8fafc;
            height: 100vh;
            display: grid;
            grid-template-columns: 350px 1fr 400px;
            gap: 1px;
            overflow: hidden;
        }

        .panel {
            background: #1e293b;
            border: 1px solid #3b82f6;
            overflow-y: auto;
            padding: 20px;
        }

        .panel-header {
            background: #334155;
            color: white;
            padding: 15px;
            font-weight: bold;
            font-size: 16px;
            margin: -20px -20px 20px -20px;
            border-bottom: 2px solid #3b82f6;
        }

        .section {
            margin-bottom: 20px;
            border: 1px solid #3b82f6;
            border-radius: 8px;
            overflow: hidden;
        }

        .section-header {
            background: #475569;
            padding: 15px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .section-header:hover {
            background: #3b82f6;
        }

        .section-header.active {
            background: #3b82f6;
        }

        .section-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .section-content.active {
            padding: 20px;
            max-height: 1000px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #f8fafc;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #3b82f6;
            border-radius: 6px;
            background: #0f172a;
            color: #f8fafc;
            font-size: 14px;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #60a5fa;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        /* CSS pour l'éditeur avancé services */
        .services-advanced-editor {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #3b82f6;
            border-radius: 8px;
            padding: 10px;
            margin-top: 10px;
            background: #0a0f1a;
        }
        
        .service-editor-item {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            position: relative;
        }
        
        .service-editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid #334155;
        }
        
        .service-editor-title {
            font-weight: bold;
            color: #3b82f6;
            font-size: 12px;
        }
        
        .service-editor-controls {
            display: flex;
            gap: 5px;
        }
        
        .service-editor-btn {
            background: none;
            border: 1px solid #475569;
            color: #94a3b8;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .service-editor-btn:hover {
            background: #475569;
            color: white;
        }
        
        .service-editor-btn.delete {
            border-color: #ef4444;
            color: #ef4444;
        }
        
        .service-editor-btn.delete:hover {
            background: #ef4444;
            color: white;
        }
        
        .service-editor-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 8px;
        }
        
        .service-editor-full {
            grid-column: span 2;
        }
        
        .service-editor-input {
            width: 100%;
            padding: 6px 8px;
            border: 1px solid #334155;
            border-radius: 4px;
            background: #0f172a;
            color: #f8fafc;
            font-size: 11px;
        }
        
        .service-editor-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
        }
        
        .service-editor-textarea {
            resize: vertical;
            min-height: 50px;
        }
        
        .service-editor-color {
            width: 60px;
            height: 30px;
            border: 1px solid #334155;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .service-editor-icon-picker {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 5px;
            margin-top: 5px;
            padding: 5px;
            background: #0f172a;
            border-radius: 4px;
            border: 1px solid #334155;
        }
        
        .service-editor-icon-option {
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border-radius: 4px;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .service-editor-icon-option:hover {
            background: #3b82f6;
        }
        
        .service-editor-icon-option.selected {
            background: #3b82f6;
            color: white;
        }
        
        .service-drag-handle {
            cursor: move;
            color: #6b7280;
            font-size: 12px;
            margin-right: 5px;
        }
        
        .service-editor-item.dragging {
            opacity: 0.5;
        }

        .block-category {
            margin-bottom: 25px;
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(139, 92, 246, 0.2));
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .category-icon {
            font-size: 20px;
        }

        .category-title {
            font-weight: bold;
            flex: 1;
        }

        .category-count {
            background: #3b82f6;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
        }

        .blocks-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .block-item {
            background: #475569;
            border: 2px solid transparent;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .block-item:hover {
            background: #3b82f6;
            transform: translateY(-2px);
        }

        .block-item.selected {
            background: #3b82f6;
            border-color: #60a5fa;
        }

        .block-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .block-name {
            font-weight: bold;
            margin-bottom: 4px;
        }

        .block-variant {
            font-size: 12px;
            color: #cbd5e1;
            margin-bottom: 8px;
        }

        .block-features {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            justify-content: center;
        }

        .block-feature {
            background: #3b82f6;
            color: white;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 9px;
        }

        .preview-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .preview-header {
            background: #334155;
            padding: 15px;
            border-bottom: 2px solid #3b82f6;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .device-switcher {
            display: flex;
            gap: 10px;
        }

        .btn-device {
            background: #475569;
            color: white;
            border: 1px solid #3b82f6;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-device:hover {
            background: #3b82f6;
        }

        .btn-device.active {
            background: #3b82f6;
        }

        .preview-frame {
            flex: 1;
            padding: 20px;
            background: #1e293b;
        }

        .preview-iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 8px;
            background: white;
        }

        .btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }

        .btn:hover {
            background: #2563eb;
        }

        .btn-success {
            background: #10b981;
        }

        .btn-success:hover {
            background: #059669;
        }

        .status-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #0f172a;
            border-top: 1px solid #3b82f6;
            padding: 10px 20px;
            font-size: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
            margin-right: 8px;
            display: inline-block;
        }

        .color-palette {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }

        /* Système d'upload d'images */
        .image-upload-zone {
            border: 2px dashed #3b82f6;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            background: rgba(59, 130, 246, 0.05);
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 15px;
        }

        .image-upload-zone:hover {
            border-color: #2563eb;
            background: rgba(59, 130, 246, 0.1);
        }

        .image-upload-zone.dragover {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.1);
        }

        .image-preview {
            max-width: 100%;
            max-height: 120px;
            border-radius: 6px;
            margin-top: 10px;
        }

        .image-controls {
            display: flex;
            gap: 8px;
            margin-top: 10px;
            justify-content: center;
        }

        .btn-small {
            padding: 4px 8px;
            font-size: 11px;
            border-radius: 4px;
        }

        .block-config-panel {
            background: rgba(15, 23, 42, 0.95);
            border: 1px solid #3b82f6;
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
            display: none;
        }

        .block-config-panel.active {
            display: block;
        }

        .config-group {
            margin-bottom: 12px;
        }

        .config-group label {
            display: block;
            font-size: 12px;
            color: #94a3b8;
            margin-bottom: 4px;
        }

        .config-group input,
        .config-group select,
        .config-group textarea {
            width: 100%;
            padding: 6px 8px;
            font-size: 12px;
            background: #1e293b;
            border: 1px solid #475569;
            border-radius: 4px;
            color: #f8fafc;
        }
    </style>
</head>
<body>
    <!-- Panel gauche -->
    <div class="panel">
        <div class="panel-header">
            🚀 AWEMA Studio Pro v2.0
        </div>

        <!-- Section Informations -->
        <div class="section">
            <div class="section-header active" data-section="0">
                <span>📋 Informations Entreprise</span>
                <span class="chevron">▼</span>
            </div>
            <div class="section-content active">
                <div class="form-group">
                    <label>Nom de l'entreprise</label>
                    <input type="text" id="companyName" value="ElectroMax Pro">
                </div>
                <div class="form-group">
                    <label>Métier principal</label>
                    <select id="trade">
                        <option value="electricien">⚡ Électricien</option>
                        <option value="plombier">💧 Plombier</option>
                        <option value="chauffagiste">🔥 Chauffagiste</option>
                        <option value="multi">🛠️ Multi-métiers</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Ville principale</label>
                    <input type="text" id="city" value="Paris">
                </div>
                <div class="form-group">
                    <label>Téléphone</label>
                    <input type="text" id="phone" value="01 23 45 67 89">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="email" value="contact@electromax.fr">
                </div>
            </div>
        </div>

        <!-- Section Services -->
        <div class="section">
            <div class="section-header" data-section="1">
                <span>⚙️ Services & Spécialités</span>
                <span class="chevron">▶</span>
            </div>
            <div class="section-content">
                <div class="form-group">
                    <label>Services principaux</label>
                    <textarea id="services">Installation électrique, Dépannage urgent, Rénovation, Mise aux normes, Domotique</textarea>
                </div>
            </div>
        </div>

        <!-- Section Google Maps -->
        <div class="section">
            <div class="section-header" data-section="1.5">
                <span>🗺️ Zone d'intervention</span>
                <span class="chevron">▶</span>
            </div>
            <div class="section-content">
                <div class="form-group">
                    <label>Adresse principale</label>
                    <input type="text" id="mainAddress" value="Paris, France" placeholder="Ville, Code postal, Adresse complète">
                    <small style="color: #64748b; font-size: 12px;">Ex: Lyon, 69000 Lyon, 123 Rue de la Paix 75001 Paris</small>
                </div>
                <div class="form-group">
                    <label>Rayon d'intervention (km)</label>
                    <input type="range" id="interventionRadius" min="5" max="50" value="20" style="width: 100%;">
                    <div style="display: flex; justify-content: space-between; font-size: 12px; color: #64748b;">
                        <span>5km</span>
                        <span id="radiusValue">20km</span>
                        <span>50km</span>
                    </div>
                </div>
                <div class="form-group">
                    <label>Zones spécifiques</label>
                    <textarea id="specificZones" placeholder="Arrondissements, quartiers, villes spécifiques...">1er, 2e, 3e, 4e arrondissement, Boulogne-Billancourt, Levallois-Perret</textarea>
                </div>
                <div class="form-group">
                    <button type="button" id="updateMapZones" class="btn" style="width: 100%;">
                        🗺️ Mettre à jour les zones sur la carte
                    </button>
                </div>
            </div>
        </div>

        <!-- Section Design -->
        <div class="section">
            <div class="section-header" data-section="2">
                <span>🎨 Design & Couleurs</span>
                <span class="chevron">▶</span>
            </div>
            <div class="section-content">
                <div class="form-group">
                    <label>Palette de couleurs métier</label>
                    <div class="color-palette" id="colorPalette"></div>
                </div>
            </div>
        </div>

        <!-- Section API Configuration -->
        <div class="section">
            <div class="section-header" data-section="3">
                <span>🔑 API Configuration</span>
                <span class="chevron">▶</span>
            </div>
            <div class="section-content">
                <div class="form-group">
                    <label>Clé API Google Maps</label>
                    <input type="text" id="googleMapsApiKey" placeholder="AIzaSy..." value="AIzaSyCESD10stchdA2iIYB2iQqtfB1YNH1G4wc">
                    <small style="color: #64748b; font-size: 12px;">Obtenez votre clé sur console.cloud.google.com</small>
                </div>
            </div>
        </div>

        <!-- Section SEO -->
        <div class="section">
            <div class="section-header" data-section="4">
                <span>🔍 SEO & Référencement</span>
                <span class="chevron">▶</span>
            </div>
            <div class="section-content">
                <div class="form-group">
                    <label>Titre SEO principal</label>
                    <input type="text" id="seoTitle" value="ElectroMax Pro - Électricien Paris | Intervention 24h/7j">
                </div>
                <div class="form-group">
                    <label>Description SEO</label>
                    <textarea id="seoDescription">Électricien expert à Paris. Intervention rapide 24h/7j. Devis gratuit.</textarea>
                </div>
            </div>
        </div>
    </div>

    <!-- Panel central (Preview) -->
    <div class="preview-container">
        <div class="preview-header">
            <span>🖥️ Preview Temps Réel</span>
            <div class="device-switcher">
                <button class="btn-device active" data-device="desktop">💻 Desktop</button>
                <button class="btn-device" data-device="tablet">📱 Tablet</button>
                <button class="btn-device" data-device="mobile">📱 Mobile</button>
                <button id="forcePreview" class="btn" style="margin-left: 10px; padding: 8px 12px; font-size: 12px;">🔄 Preview Simple</button>
                <button id="forcePreviewFull" class="btn" style="margin-left: 5px; padding: 8px 12px; font-size: 12px;">⚡ Preview Complète</button>
            </div>
        </div>
        <div class="preview-frame">
            <iframe id="preview" class="preview-iframe"></iframe>
        </div>
    </div>

    <!-- Panel droit (Blocs) -->
    <div class="panel">
        <div class="panel-header">
            🧩 Bibliothèque de Blocs
        </div>

        <!-- CTA BLOCKS -->
        <div class="block-category">
            <div class="category-header">
                <div class="category-icon">🎯</div>
                <div class="category-title">CTA Blocks</div>
                <div class="category-count">5</div>
            </div>
            <div class="blocks-grid">
                <div class="block-item" data-block="cta" data-variant="floating-bar">
                    <div class="block-icon">📌</div>
                    <div class="block-name">Floating Bar</div>
                    <div class="block-variant">Barre fixe</div>
                    <div class="block-features">
                        <span class="block-feature">Fixe</span>
                    </div>
                </div>
                
                <div class="block-item" data-block="cta" data-variant="exit-intent">
                    <div class="block-icon">🚪</div>
                    <div class="block-name">Exit Intent</div>
                    <div class="block-variant">Popup sortie</div>
                    <div class="block-features">
                        <span class="block-feature">Popup</span>
                    </div>
                </div>
                
                <div class="block-item" data-block="cta" data-variant="scroll-triggered">
                    <div class="block-icon">📜</div>
                    <div class="block-name">Scroll Triggered</div>
                    <div class="block-variant">Apparition scroll</div>
                    <div class="block-features">
                        <span class="block-feature">Scroll</span>
                    </div>
                </div>
                
                <div class="block-item" data-block="cta" data-variant="urgency-timer">
                    <div class="block-icon">⏰</div>
                    <div class="block-name">Urgency Timer</div>
                    <div class="block-variant">Compte à rebours</div>
                    <div class="block-features">
                        <span class="block-feature">Timer</span>
                    </div>
                </div>
                
                <div class="block-item" data-block="cta" data-variant="whatsapp-integrated">
                    <div class="block-icon">💬</div>
                    <div class="block-name">WhatsApp</div>
                    <div class="block-variant">Chat Business</div>
                    <div class="block-features">
                        <span class="block-feature">WhatsApp</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- STATS BLOCKS -->
        <div class="block-category">
            <div class="category-header">
                <div class="category-icon">📊</div>
                <div class="category-title">Stats Blocks</div>
                <div class="category-count">5</div>
            </div>
            <div class="blocks-grid">
                <div class="block-item" data-block="stats" data-variant="animated-counters">
                    <div class="block-icon">🔢</div>
                    <div class="block-name">Animated Counters</div>
                    <div class="block-variant">Compteurs GSAP</div>
                    <div class="block-features">
                        <span class="block-feature">GSAP</span>
                    </div>
                </div>
                
                <div class="block-item" data-block="stats" data-variant="circular-progress">
                    <div class="block-icon">⭕</div>
                    <div class="block-name">Circular Progress</div>
                    <div class="block-variant">Progress SVG</div>
                    <div class="block-features">
                        <span class="block-feature">SVG</span>
                    </div>
                </div>
                
                <div class="block-item" data-block="stats" data-variant="comparison-charts">
                    <div class="block-icon">📈</div>
                    <div class="block-name">Comparison Charts</div>
                    <div class="block-variant">Graphiques comparatifs</div>
                    <div class="block-features">
                        <span class="block-feature">Charts</span>
                    </div>
                </div>
                
                <div class="block-item" data-block="stats" data-variant="real-time">
                    <div class="block-icon">⚡</div>
                    <div class="block-name">Real Time</div>
                    <div class="block-variant">Métriques temps réel</div>
                    <div class="block-features">
                        <span class="block-feature">Live</span>
                    </div>
                </div>
                
                <div class="block-item" data-block="stats" data-variant="milestone-timeline">
                    <div class="block-icon">🏆</div>
                    <div class="block-name">Milestone Timeline</div>
                    <div class="block-variant">Timeline réalisations</div>
                    <div class="block-features">
                        <span class="block-feature">Timeline</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- HERO BLOCKS -->
        <div class="block-category">
            <div class="category-header">
                <div class="category-icon">🎭</div>
                <div class="category-title">Hero Blocks</div>
                <div class="category-count">10</div>
            </div>
            <div class="blocks-grid">
                <div class="block-item selected" data-block="hero" data-variant="ultra-pro">
                    <div class="block-icon">⚡</div>
                    <div class="block-name">Ultra Pro</div>
                    <div class="block-variant">Premium parallax</div>
                    <div class="block-features">
                        <span class="block-feature">Glassmorphism</span>
                    </div>
                    <!-- Configuration Panel -->
                    <div class="block-config-panel active">
                        <div class="config-group">
                            <label>Image de fond</label>
                            <div class="image-upload-zone" data-target="hero-bg">
                                <div class="upload-text">
                                    <strong>📷 Glisser une image ici</strong><br>
                                    <small>ou cliquer pour parcourir</small><br>
                                    <small>JPG, PNG, WebP (max 5MB)</small>
                                </div>
                            </div>
                        </div>
                        <div class="config-group">
                            <label>Titre principal</label>
                            <input type="text" id="heroTitle" value="ElectroMax Pro" placeholder="Titre principal" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Sous-titre</label>
                            <input type="text" id="heroSubtitle" value="🚀 Électricien Expert Ultra Pro" placeholder="Sous-titre" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Description</label>
                            <textarea id="heroDescription" rows="2" placeholder="Description courte" oninput="updatePreview()">✨ Innovation • Performance • Excellence depuis 2010</textarea>
                        </div>
                        <div class="config-group">
                            <label>Texte bouton principal</label>
                            <input type="text" id="heroCtaText" value="Découvrir" placeholder="Texte bouton" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Texte bouton secondaire</label>
                            <input type="text" id="heroCtaSecondary" value="Appeler" placeholder="Bouton secondaire" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Lien bouton principal</label>
                            <input type="text" id="heroCtaLink" value="#services" placeholder="URL ou #section" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Lien bouton secondaire</label>
                            <input type="text" id="heroCtaSecondaryLink" value="tel:" placeholder="tel:0123456789 ou URL" oninput="updatePreview()">
                        </div>
                    </div>
                </div>
                
                <div class="block-item" data-block="hero" data-variant="video">
                    <div class="block-icon">🎥</div>
                    <div class="block-name">Video</div>
                    <div class="block-variant">Background vidéo</div>
                    <div class="block-features">
                        <span class="block-feature">Video</span>
                    </div>
                    <!-- Configuration Panel -->
                    <div class="block-config-panel">
                        <div class="config-group">
                            <label>Vidéo de fond</label>
                            <div class="image-upload-zone" data-target="hero-video">
                                <div class="upload-text">
                                    <strong>🎬 Glisser une vidéo ici</strong><br>
                                    <small>ou cliquer pour parcourir</small><br>
                                    <small>MP4, WebM (max 50MB)</small>
                                </div>
                            </div>
                        </div>
                        <div class="config-group">
                            <label>Image de fallback</label>
                            <div class="image-upload-zone" data-target="hero-fallback">
                                <div class="upload-text">
                                    <strong>📷 Image de secours</strong><br>
                                    <small>si vidéo non supportée</small>
                                </div>
                            </div>
                        </div>
                        <div class="config-group">
                            <label>Titre principal</label>
                            <input type="text" id="heroVideoTitle" placeholder="Titre sur vidéo" value="🎬 ElectroMax Pro" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Sous-titre</label>
                            <input type="text" id="heroVideoSubtitle" placeholder="Sous-titre vidéo" value="Découvrez notre expertise en vidéo" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Description</label>
                            <textarea id="heroVideoDescription" rows="2" placeholder="Description vidéo" oninput="updatePreview()">Une expérience immersive pour comprendre notre savoir-faire</textarea>
                        </div>
                        <div class="config-group">
                            <label>Texte bouton</label>
                            <input type="text" id="heroVideoCtaText" placeholder="Texte bouton" value="▶ Voir nos réalisations" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Lien bouton</label>
                            <input type="text" id="heroVideoCtaLink" placeholder="URL ou #section" value="#services" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Options vidéo</label>
                            <label><input type="checkbox" checked> Lecture automatique</label>
                            <label><input type="checkbox" checked> Boucle infinie</label>
                            <label><input type="checkbox"> Son activé</label>
                        </div>
                    </div>
                </div>
                
                <div class="block-item" data-block="hero" data-variant="split-diagonal">
                    <div class="block-icon">📐</div>
                    <div class="block-name">Split Diagonal</div>
                    <div class="block-variant">Asymétrique</div>
                    <div class="block-features">
                        <span class="block-feature">Géométrie</span>
                    </div>
                    <!-- Configuration Panel -->
                    <div class="block-config-panel">
                        <div class="config-group">
                            <label>Image asymétrique</label>
                            <div class="image-upload-zone" data-target="hero-split-bg">
                                <div class="upload-text">
                                    <strong>📐 Image pour forme diagonale</strong><br>
                                    <small>Sera coupée en forme géométrique</small>
                                </div>
                            </div>
                        </div>
                        <div class="config-group">
                            <label>Titre principal</label>
                            <input type="text" id="heroSplitTitle" placeholder="Titre asymétrique" value="⚡ ElectroMax Pro" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Sous-titre</label>
                            <input type="text" id="heroSplitSubtitle" placeholder="Sous-titre" value="Design Asymétrique • Innovation Pure" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Description</label>
                            <textarea id="heroSplitDescription" rows="2" placeholder="Description" oninput="updatePreview()">Une approche révolutionnaire qui sort des standards</textarea>
                        </div>
                        <div class="config-group">
                            <label>Texte bouton</label>
                            <input type="text" id="heroSplitCtaText" placeholder="Texte bouton" value="Explorer" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Lien bouton</label>
                            <input type="text" id="heroSplitCtaLink" placeholder="URL ou #section" value="#services" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Angle diagonal</label>
                            <select onchange="updatePreview()">
                                <option>Diagonal droite</option>
                                <option>Diagonal gauche</option>
                                <option>Double diagonal</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="block-item" data-block="hero" data-variant="floating-elements">
                    <div class="block-icon">✨</div>
                    <div class="block-name">Floating Elements</div>
                    <div class="block-variant">Éléments flottants</div>
                    <div class="block-features">
                        <span class="block-feature">Animé</span>
                    </div>
                    <!-- Configuration Panel -->
                    <div class="block-config-panel">
                        <div class="config-group">
                            <label>Image de fond</label>
                            <div class="image-upload-zone" data-target="hero-floating-bg">
                                <div class="upload-text">
                                    <strong>✨ Image pour éléments flottants</strong><br>
                                    <small>Arrière-plan avec animations</small>
                                </div>
                            </div>
                        </div>
                        <div class="config-group">
                            <label>Nombre d'éléments</label>
                            <select onchange="updatePreview()">
                                <option>4 éléments</option>
                                <option>6 éléments</option>
                                <option>8 éléments</option>
                            </select>
                        </div>
                        <div class="config-group">
                            <label>Vitesse animation</label>
                            <input type="range" min="3" max="12" value="6" onchange="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Titre principal</label>
                            <input type="text" id="heroFloatingTitle" placeholder="Titre" value="✨ ElectroMax Pro" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Sous-titre</label>
                            <input type="text" id="heroFloatingSubtitle" placeholder="Sous-titre" value="Éléments en Mouvement • Dynamisme Pur" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Description</label>
                            <textarea id="heroFloatingDescription" rows="2" placeholder="Description" oninput="updatePreview()">Une expérience visuelle immersive et moderne</textarea>
                        </div>
                        <div class="config-group">
                            <label>Texte bouton</label>
                            <input type="text" id="heroFloatingCtaText" placeholder="Texte bouton" value="Découvrir la magie" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Lien bouton</label>
                            <input type="text" id="heroFloatingCtaLink" placeholder="URL ou #section" value="#services" oninput="updatePreview()">
                        </div>
                    </div>
                </div>
                
                <div class="block-item" data-block="hero" data-variant="magazine">
                    <div class="block-icon">📰</div>
                    <div class="block-name">Magazine</div>
                    <div class="block-variant">Style éditorial</div>
                    <div class="block-features">
                        <span class="block-feature">Timeline</span>
                    </div>
                    <!-- Configuration Panel -->
                    <div class="block-config-panel">
                        <div class="config-group">
                            <label>Image éditoriale</label>
                            <div class="image-upload-zone" data-target="hero-magazine-img">
                                <div class="upload-text">
                                    <strong>📰 Image style magazine</strong><br>
                                    <small>Côté gauche du layout</small>
                                </div>
                            </div>
                        </div>
                        <div class="config-group">
                            <label>Catégorie</label>
                            <input type="text" id="heroMagazineCategory" placeholder="EXPERT, INNOVATION..." value="EXPERT" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Temps de lecture</label>
                            <input type="text" id="heroMagazineReadTime" placeholder="5 min de lecture" value="5 min de lecture" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Titre principal</label>
                            <input type="text" id="heroMagazineTitle" placeholder="Titre magazine" value="ElectroMax Pro" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Sous-titre éditorial</label>
                            <input type="text" id="heroMagazineSubtitle" placeholder="Sous-titre" value="L'Excellence Éditoriale" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Excerpt (extrait)</label>
                            <textarea id="heroMagazineExcerpt" rows="3" placeholder="Extrait éditorial" oninput="updatePreview()">Un savoir-faire d'exception raconté avec passion. Découvrez notre histoire, notre expertise et notre vision d'avenir.</textarea>
                        </div>
                        <div class="config-group">
                            <label>Auteur</label>
                            <input type="text" id="heroMagazineAuthor" placeholder="Nom auteur" value="ElectroMax Pro" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Texte bouton</label>
                            <input type="text" id="heroMagazineCtaText" placeholder="Texte bouton" value="Lire l'article" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Lien bouton</label>
                            <input type="text" id="heroMagazineCtaLink" placeholder="URL ou #section" value="#services" oninput="updatePreview()">
                        </div>
                    </div>
                </div>
                
                <div class="block-item" data-block="hero" data-variant="interactive-stats">
                    <div class="block-icon">📊</div>
                    <div class="block-name">Interactive Stats</div>
                    <div class="block-variant">Stats animées</div>
                    <div class="block-features">
                        <span class="block-feature">Stats</span>
                    </div>
                    <!-- Configuration Panel -->
                    <div class="block-config-panel">
                        <div class="config-group">
                            <label>Image de fond stats</label>
                            <div class="image-upload-zone" data-target="hero-stats-bg">
                                <div class="upload-text">
                                    <strong>📊 Fond pour statistiques</strong><br>
                                    <small>Avec overlay sombre automatique</small>
                                </div>
                            </div>
                        </div>
                        <div class="config-group">
                            <label>Statistique 1</label>
                            <input type="text" id="heroStatsStat1" placeholder="500+ Projets réalisés" value="500+ Projets réalisés" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Statistique 2</label>
                            <input type="text" id="heroStatsStat2" placeholder="15 Années d'expérience" value="15 Années d'expérience" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Statistique 3</label>
                            <input type="text" id="heroStatsStat3" placeholder="98% Clients satisfaits" value="98% Clients satisfaits" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Statistique 4</label>
                            <input type="text" id="heroStatsStat4" placeholder="24h Intervention rapide" value="24h Intervention rapide" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Titre principal</label>
                            <input type="text" id="heroStatsTitle" placeholder="Titre" value="📊 ElectroMax Pro" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Sous-titre</label>
                            <input type="text" id="heroStatsSubtitle" placeholder="Sous-titre" value="Performance • Données • Excellence" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Description</label>
                            <textarea id="heroStatsDescription" rows="2" placeholder="Description" oninput="updatePreview()">Les chiffres parlent d'eux-mêmes</textarea>
                        </div>
                        <div class="config-group">
                            <label>Afficher icône 📊</label>
                            <input type="checkbox" id="heroStatsShowIcon" checked onchange="updatePreview()"> Icône dans le titre
                        </div>
                    </div>
                </div>
                
                <div class="block-item" data-block="hero" data-variant="corporate-clean">
                    <div class="block-icon">🏢</div>
                    <div class="block-name">Corporate Clean</div>
                    <div class="block-variant">Version épurée</div>
                    <div class="block-features">
                        <span class="block-feature">Clean</span>
                    </div>
                    <!-- Configuration Panel -->
                    <div class="block-config-panel">
                        <div class="config-group">
                            <label>Image corporate</label>
                            <div class="image-upload-zone" data-target="hero-corporate-img">
                                <div class="upload-text">
                                    <strong>🏢 Image professionnelle</strong><br>
                                    <small>Côté droit, style corporate</small>
                                </div>
                            </div>
                        </div>
                        <div class="config-group">
                            <label>Badge excellence</label>
                            <input type="text" id="heroCorporateBadge" placeholder="EXCELLENCE, CERTIFIÉ..." value="EXCELLENCE" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Titre principal</label>
                            <input type="text" id="heroCorporateTitle" placeholder="Titre corporate" value="🏢 ElectroMax Pro" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Sous-titre</label>
                            <input type="text" id="heroCorporateSubtitle" placeholder="Sous-titre" value="Solutions Professionnelles • Expertise Corporate" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Description</label>
                            <textarea id="heroCorporateDescription" rows="2" placeholder="Description corporate" oninput="updatePreview()">Une approche professionnelle et des solutions sur mesure</textarea>
                        </div>
                        <div class="config-group">
                            <label>Features corporate</label>
                            <textarea id="heroCorporateFeatures" rows="3" placeholder="✓ Certification &#10;✓ Garantie &#10;✓ Service 24h" oninput="updatePreview()">✓ Certification qualité&#10;✓ Garantie étendue&#10;✓ Service 24h/7j</textarea>
                        </div>
                        <div class="config-group">
                            <label>Texte bouton</label>
                            <input type="text" id="heroCorporateCtaText" placeholder="Texte bouton" value="Nous contacter" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Lien bouton</label>
                            <input type="text" id="heroCorporateCtaLink" placeholder="URL ou #section" value="#contact" oninput="updatePreview()">
                        </div>
                    </div>
                </div>
                
                <div class="block-item" data-block="hero" data-variant="parallax-layers">
                    <div class="block-icon">🌊</div>
                    <div class="block-name">Parallax Layers</div>
                    <div class="block-variant">Multi-couches</div>
                    <div class="block-features">
                        <span class="block-feature">3D</span>
                    </div>
                    <!-- Configuration Panel -->
                    <div class="block-config-panel">
                        <div class="config-group">
                            <label>Image parallax</label>
                            <div class="image-upload-zone" data-target="hero-parallax-bg">
                                <div class="upload-text">
                                    <strong>🌊 Image avec effet 3D</strong><br>
                                    <small>Effet parallax multi-couches</small>
                                </div>
                            </div>
                        </div>
                        <div class="config-group">
                            <label>Titre principal</label>
                            <input type="text" id="heroParallaxTitle" placeholder="Titre parallax" value="🌊 ElectroMax Pro" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Sous-titre</label>
                            <input type="text" id="heroParallaxSubtitle" placeholder="Sous-titre" value="Effet 3D • Profondeur • Immersion" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Description</label>
                            <textarea id="heroParallaxDescription" rows="2" placeholder="Description parallax" oninput="updatePreview()">Une expérience visuelle en 3D qui vous transporte</textarea>
                        </div>
                        <div class="config-group">
                            <label>Texte bouton</label>
                            <input type="text" id="heroParallaxCtaText" placeholder="Texte bouton" value="Plonger dans l'expérience" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Lien bouton</label>
                            <input type="text" id="heroParallaxCtaLink" placeholder="URL ou #section" value="#services" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Intensité parallax</label>
                            <select id="heroParallaxIntensity" onchange="updatePreview()">
                                <option>Subtil</option>
                                <option selected>Moyen</option>
                                <option>Intense</option>
                            </select>
                        </div>
                        <div class="config-group">
                            <label>Couches overlay</label>
                            <input type="checkbox" id="heroParallaxGradient" checked onchange="updatePreview()"> Gradient coloré<br>
                            <input type="checkbox" id="heroParallaxParticles" checked onchange="updatePreview()"> Particules flottantes
                        </div>
                    </div>
                </div>
                
                <div class="block-item" data-block="hero" data-variant="centered-minimal">
                    <div class="block-icon">⚪</div>
                    <div class="block-name">Centered Minimal</div>
                    <div class="block-variant">Pages intérieures</div>
                    <div class="block-features">
                        <span class="block-feature">Minimal</span>
                    </div>
                    <!-- Configuration Panel -->
                    <div class="block-config-panel">
                        <div class="config-group">
                            <label>Image minimaliste</label>
                            <div class="image-upload-zone" data-target="hero-minimal-bg">
                                <div class="upload-text">
                                    <strong>⚪ Image épurée</strong><br>
                                    <small>Filtre automatique appliqué</small>
                                </div>
                            </div>
                        </div>
                        <div class="config-group">
                            <label>Titre principal</label>
                            <input type="text" id="heroMinimalTitle" placeholder="Titre minimal" value="⚪ ElectroMax Pro" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Sous-titre</label>
                            <input type="text" id="heroMinimalSubtitle" placeholder="Sous-titre" value="Simplicité • Élégance • Efficacité" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Description</label>
                            <textarea id="heroMinimalDescription" rows="2" placeholder="Description minimaliste" oninput="updatePreview()">L'essentiel exprimé avec élégance</textarea>
                        </div>
                        <div class="config-group">
                            <label>Texte bouton</label>
                            <input type="text" id="heroMinimalCtaText" placeholder="Texte bouton" value="Découvrir" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Lien bouton</label>
                            <input type="text" id="heroMinimalCtaLink" placeholder="URL ou #section" value="#services" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Style typographie</label>
                            <select id="heroMinimalTypo" onchange="updatePreview()">
                                <option>Ultra-fin</option>
                                <option selected>Équilibré</option>
                                <option>Bold moderne</option>
                            </select>
                        </div>
                        <div class="config-group">
                            <label>Filtre image</label>
                            <input type="checkbox" id="heroMinimalBW" checked onchange="updatePreview()"> Noir & blanc<br>
                            <input type="checkbox" id="heroMinimalDarken" checked onchange="updatePreview()"> Assombrir
                        </div>
                    </div>
                </div>
                
                <div class="block-item" data-block="hero" data-variant="cards-layout">
                    <div class="block-icon">🃏</div>
                    <div class="block-name">Cards Layout</div>
                    <div class="block-variant">Cartes features</div>
                    <div class="block-features">
                        <span class="block-feature">Cards</span>
                    </div>
                    <!-- Configuration Panel -->
                    <div class="block-config-panel">
                        <div class="config-group">
                            <label>Image fond cartes</label>
                            <div class="image-upload-zone" data-target="hero-cards-bg">
                                <div class="upload-text">
                                    <strong>🃏 Fond pour cartes</strong><br>
                                    <small>Overlay foncé automatique</small>
                                </div>
                            </div>
                        </div>
                        <div class="config-group">
                            <label>Titre principal</label>
                            <input type="text" id="heroCardsTitle" placeholder="Titre cartes" value="🃏 ElectroMax Pro" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Sous-titre</label>
                            <input type="text" id="heroCardsSubtitle" placeholder="Sous-titre" value="Services • Features • Avantages" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Description</label>
                            <textarea id="heroCardsDescription" rows="2" placeholder="Description cartes" oninput="updatePreview()">Nos services présentés de manière moderne et attractive</textarea>
                        </div>
                        <div class="config-group">
                            <label>Carte 1 - Titre</label>
                            <input type="text" id="heroCardsCard1Title" placeholder="Titre carte 1" value="Installation" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Carte 1 - Description</label>
                            <input type="text" id="heroCardsCard1Desc" placeholder="Description carte 1" value="Installation complète et professionnelle" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Carte 2 - Titre</label>
                            <input type="text" id="heroCardsCard2Title" placeholder="Titre carte 2" value="Maintenance" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Carte 2 - Description</label>
                            <input type="text" id="heroCardsCard2Desc" placeholder="Description carte 2" value="Maintenance préventive et curative" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Carte 3 - Titre</label>
                            <input type="text" id="heroCardsCard3Title" placeholder="Titre carte 3" value="Dépannage" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Carte 3 - Description</label>
                            <input type="text" id="heroCardsCard3Desc" placeholder="Description carte 3" value="Intervention rapide 24h/7j" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Texte bouton</label>
                            <input type="text" id="heroCardsCtaText" placeholder="Texte bouton" value="Voir tous nos services" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Lien bouton</label>
                            <input type="text" id="heroCardsCtaLink" placeholder="URL ou #section" value="#services" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Nombre de cartes</label>
                            <select id="heroCardsNumber" onchange="updatePreview()">
                                <option selected>3 cartes</option>
                                <option>4 cartes</option>
                                <option>6 cartes</option>
                            </select>
                        </div>
                        <div class="config-group">
                            <label>Style des cartes</label>
                            <select id="heroCardsStyle" onchange="updatePreview()">
                                <option selected>Glassmorphisme</option>
                                <option>Solide</option>
                                <option>Bordure uniquement</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SERVICES BLOCKS -->
        <div class="block-category">
            <div class="category-header">
                <div class="category-icon">⚙️</div>
                <div class="category-title">Services Blocks</div>
                <div class="category-count">8</div>
            </div>
            <div class="blocks-grid">
                <div class="block-item selected" data-block="services" data-variant="ultra-pro">
                    <div class="block-icon">💎</div>
                    <div class="block-name">Ultra Pro</div>
                    <div class="block-variant">Premium stagger</div>
                    <div class="block-features">
                        <span class="block-feature">Stagger</span>
                    </div>
                    <!-- Configuration Panel -->
                    <div class="block-config-panel active">
                        <div class="config-group">
                            <label>Titre section</label>
                            <input type="text" id="servicesTitle" value="Nos Services Ultra-Pro" placeholder="Titre de la section" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Sous-titre</label>
                            <input type="text" id="servicesSubtitle" value="🚀 Solutions révolutionnaires avec animations 2025" placeholder="Sous-titre" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Style des particules</label>
                            <select id="servicesParticleStyle" onchange="updatePreview()">
                                <option selected>Particules flottantes</option>
                                <option>Étoiles scintillantes</option>
                                <option>Cercles colorés</option>
                                <option>Sans particules</option>
                            </select>
                        </div>
                        <div class="config-group">
                            <label>Animation des cartes</label>
                            <select id="servicesCardAnimation" onchange="updatePreview()">
                                <option selected>Stagger (décalé)</option>
                                <option>Simultané</option>
                                <option>Vague</option>
                                <option>Spiral</option>
                            </select>
                        </div>
                        <div class="config-group">
                            <label>Style des icônes</label>
                            <select id="servicesIconStyle" onchange="updatePreview()">
                                <option selected>Gradient + Glow</option>
                                <option>Glassmorphisme</option>
                                <option>Néon</option>
                                <option>Minimaliste</option>
                                <option>Sans fond rond</option>
                            </select>
                        </div>
                        
                        <!-- ÉDITEUR AVANCÉ SERVICES -->
                        <div class="config-group">
                            <label style="display: flex; justify-content: space-between; align-items: center;">
                                <span>⚙️ Services (Éditeur Avancé)</span>
                                <button type="button" class="btn-add-service" onclick="addNewService()" style="background: #10b981; color: white; border: none; padding: 5px 10px; border-radius: 15px; font-size: 11px;">+ Ajouter</button>
                            </label>
                            <div id="servicesAdvancedEditor" class="services-advanced-editor">
                                <!-- Services seront générés dynamiquement -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="block-item" data-block="services" data-variant="carousel-advanced">
                    <div class="block-icon">🎠</div>
                    <div class="block-name">Carousel Avancé</div>
                    <div class="block-variant">Slider + filtres</div>
                    <div class="block-features">
                        <span class="block-feature">Slider</span>
                    </div>
                    <!-- Configuration Panel -->
                    <div class="block-config-panel">
                        <div class="config-group">
                            <label>Titre section</label>
                            <input type="text" id="servicesCarouselTitle" value="Nos Services Premium" placeholder="Titre de la section" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Sous-titre</label>
                            <input type="text" id="servicesCarouselSubtitle" value="🎠 Découvrez nos solutions en carousel interactif" placeholder="Sous-titre" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Services par vue</label>
                            <select id="carouselItemsPerView" onchange="updatePreview()">
                                <option>1 service</option>
                                <option selected>2 services</option>
                                <option>3 services</option>
                            </select>
                        </div>
                        <div class="config-group">
                            <label>Auto-scroll</label>
                            <select id="carouselAutoplay" onchange="updatePreview()">
                                <option>Désactivé</option>
                                <option selected>3 secondes</option>
                                <option>5 secondes</option>
                                <option>10 secondes</option>
                            </select>
                        </div>
                        <div class="config-group">
                            <label>Style navigation</label>
                            <select id="carouselNavStyle" onchange="updatePreview()">
                                <option selected>Boutons ronds</option>
                                <option>Flèches modernes</option>
                                <option>Points indicateurs</option>
                                <option>Minimaliste</option>
                            </select>
                        </div>
                        
                        <!-- ÉDITEUR AVANCÉ SERVICES CAROUSEL -->
                        <div class="config-group">
                            <label style="display: flex; justify-content: space-between; align-items: center;">
                                <span>⚙️ Services Carousel (Éditeur Avancé)</span>
                                <button type="button" class="btn-add-service" onclick="addNewService()" style="background: #10b981; color: white; border: none; padding: 5px 10px; border-radius: 15px; font-size: 11px;">+ Ajouter</button>
                            </label>
                            <div id="servicesCarouselAdvancedEditor" class="services-advanced-editor">
                                <!-- Services seront générés dynamiquement -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="block-item" data-block="services" data-variant="masonry">
                    <div class="block-icon">🧱</div>
                    <div class="block-name">Masonry</div>
                    <div class="block-variant">Style Pinterest</div>
                    <div class="block-features">
                        <span class="block-feature">Pinterest</span>
                    </div>
                    <!-- Configuration Panel -->
                    <div class="block-config-panel">
                        <div class="config-group">
                            <label>Titre section</label>
                            <input type="text" id="servicesMasonryTitle" value="Nos Services Masonry" placeholder="Titre de la section" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Sous-titre</label>
                            <input type="text" id="servicesMasonrySubtitle" value="🧱 Style Pinterest avec filtres interactifs" placeholder="Sous-titre" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Filtres activés</label>
                            <select id="masonryFilters" onchange="updatePreview()">
                                <option selected>Installation | Dépannage | Rénovation</option>
                                <option>Urgent | Standard | Premium</option>
                                <option>Intérieur | Extérieur | Mixte</option>
                                <option>Sans filtres</option>
                            </select>
                        </div>
                        <div class="config-group">
                            <label>Hauteurs des cartes</label>
                            <select id="masonryHeights" onchange="updatePreview()">
                                <option selected>Hauteurs variées</option>
                                <option>Hauteurs uniformes</option>
                                <option>2 hauteurs alternées</option>
                                <option>Random intelligent</option>
                            </select>
                        </div>
                        <div class="config-group">
                            <label>Effet hover</label>
                            <select id="masonryHoverEffect" onchange="updatePreview()">
                                <option selected>Zoom + overlay</option>
                                <option>Rotation + glow</option>
                                <option>Scale + shadow</option>
                                <option>Minimal</option>
                            </select>
                        </div>
                        
                        <!-- ÉDITEUR AVANCÉ SERVICES MASONRY -->
                        <div class="config-group">
                            <label style="display: flex; justify-content: space-between; align-items: center;">
                                <span>⚙️ Services Masonry (Éditeur Avancé)</span>
                                <button type="button" class="btn-add-service" onclick="addNewService()" style="background: #10b981; color: white; border: none; padding: 5px 10px; border-radius: 15px; font-size: 11px;">+ Ajouter</button>
                            </label>
                            <div id="servicesMasonryAdvancedEditor" class="services-advanced-editor">
                                <!-- Services seront générés dynamiquement -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="block-item" data-block="services" data-variant="tabs-interactive">
                    <div class="block-icon">📑</div>
                    <div class="block-name">Tabs Interactive</div>
                    <div class="block-variant">Onglets + transitions</div>
                    <div class="block-features">
                        <span class="block-feature">Tabs</span>
                    </div>
                    <!-- Configuration Panel -->
                    <div class="block-config-panel">
                        <div class="config-group">
                            <label>Titre section</label>
                            <input type="text" id="servicesTabsTitle" value="Nos Services par Catégorie" placeholder="Titre de la section" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Sous-titre</label>
                            <input type="text" id="servicesTabsSubtitle" value="📑 Explorez nos services par onglets interactifs" placeholder="Sous-titre" oninput="updatePreview()">
                        </div>
                        <!-- ÉDITEUR AVANCÉ SERVICES TABS -->
                        <div class="config-group">
                            <label style="display: flex; justify-content: space-between; align-items: center;">
                                <span>⚙️ Services Tabs (Éditeur Avancé)</span>
                                <button type="button" class="btn-add-service" onclick="addNewService()" style="background: #10b981; color: white; border: none; padding: 5px 10px; border-radius: 15px; font-size: 11px;">+ Ajouter</button>
                            </label>
                            <div id="servicesTabsAdvancedEditor" class="services-advanced-editor">
                                <!-- Services seront générés dynamiquement -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="block-item" data-block="services" data-variant="timeline-process">
                    <div class="block-icon">⏳</div>
                    <div class="block-name">Timeline Process</div>
                    <div class="block-variant">Timeline H/V</div>
                    <div class="block-features">
                        <span class="block-feature">Timeline</span>
                    </div>
                    <!-- Configuration Panel -->
                    <div class="block-config-panel">
                        <div class="config-group">
                            <label>Titre section</label>
                            <input type="text" id="servicesTimelineTitle" value="Notre Processus d'Intervention" placeholder="Titre de la section" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Sous-titre</label>
                            <input type="text" id="servicesTimelineSubtitle" value="⏳ En 4 étapes simples et efficaces" placeholder="Sous-titre" oninput="updatePreview()">
                        </div>
                        <!-- ÉDITEUR AVANCÉ SERVICES TIMELINE -->
                        <div class="config-group">
                            <label style="display: flex; justify-content: space-between; align-items: center;">
                                <span>⚙️ Services Timeline (Éditeur Avancé)</span>
                                <button type="button" class="btn-add-service" onclick="addNewService()" style="background: #10b981; color: white; border: none; padding: 5px 10px; border-radius: 15px; font-size: 11px;">+ Ajouter</button>
                            </label>
                            <div id="servicesTimelineAdvancedEditor" class="services-advanced-editor">
                                <!-- Services seront générés dynamiquement -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="block-item" data-block="services" data-variant="comparison-table">
                    <div class="block-icon">⚖️</div>
                    <div class="block-name">Comparison Table</div>
                    <div class="block-variant">Tableau comparatif</div>
                    <div class="block-features">
                        <span class="block-feature">Compare</span>
                    </div>
                    <!-- Configuration Panel -->
                    <div class="block-config-panel">
                        <div class="config-group">
                            <label>Titre section</label>
                            <input type="text" id="servicesComparisonTitle" value="Comparez Nos Formules" placeholder="Titre de la section" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Sous-titre</label>
                            <input type="text" id="servicesComparisonSubtitle" value="⚖️ Trouvez la formule adaptée à vos besoins" placeholder="Sous-titre" oninput="updatePreview()">
                        </div>
                        <!-- ÉDITEUR AVANCÉ SERVICES COMPARISON -->
                        <div class="config-group">
                            <label style="display: flex; justify-content: space-between; align-items: center;">
                                <span>⚙️ Services Comparison (Éditeur Avancé)</span>
                                <button type="button" class="btn-add-service" onclick="addNewService()" style="background: #10b981; color: white; border: none; padding: 5px 10px; border-radius: 15px; font-size: 11px;">+ Ajouter</button>
                            </label>
                            <div id="servicesComparisonAdvancedEditor" class="services-advanced-editor">
                                <!-- Services seront générés dynamiquement -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="block-item" data-block="services" data-variant="hexagon-grid">
                    <div class="block-icon">⬡</div>
                    <div class="block-name">Hexagon Grid</div>
                    <div class="block-variant">Motif hexagonal</div>
                    <div class="block-features">
                        <span class="block-feature">Hexagon</span>
                    </div>
                    <!-- Configuration Panel -->
                    <div class="block-config-panel">
                        <div class="config-group">
                            <label>Titre section</label>
                            <input type="text" id="servicesHexagonTitle" value="Nos Services Hexagonaux" placeholder="Titre de la section" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Sous-titre</label>
                            <input type="text" id="servicesHexagonSubtitle" value="⬡ Design unique en motif hexagonal" placeholder="Sous-titre" oninput="updatePreview()">
                        </div>
                        <!-- ÉDITEUR AVANCÉ SERVICES HEXAGON -->
                        <div class="config-group">
                            <label style="display: flex; justify-content: space-between; align-items: center;">
                                <span>⚙️ Services Hexagon (Éditeur Avancé)</span>
                                <button type="button" class="btn-add-service" onclick="addNewService()" style="background: #10b981; color: white; border: none; padding: 5px 10px; border-radius: 15px; font-size: 11px;">+ Ajouter</button>
                            </label>
                            <div id="servicesHexagonAdvancedEditor" class="services-advanced-editor">
                                <!-- Services seront générés dynamiquement -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="block-item" data-block="services" data-variant="accordion">
                    <div class="block-icon">📚</div>
                    <div class="block-name">Accordion</div>
                    <div class="block-variant">Liste extensible</div>
                    <div class="block-features">
                        <span class="block-feature">Accordion</span>
                    </div>
                    <!-- Configuration Panel -->
                    <div class="block-config-panel">
                        <div class="config-group">
                            <label>Titre section</label>
                            <input type="text" id="servicesAccordionTitle" value="Nos Services Détaillés" placeholder="Titre de la section" oninput="updatePreview()">
                        </div>
                        <div class="config-group">
                            <label>Sous-titre</label>
                            <input type="text" id="servicesAccordionSubtitle" value="📚 Explorez en détail chacun de nos services" placeholder="Sous-titre" oninput="updatePreview()">
                        </div>
                        <!-- ÉDITEUR AVANCÉ SERVICES ACCORDION -->
                        <div class="config-group">
                            <label style="display: flex; justify-content: space-between; align-items: center;">
                                <span>⚙️ Services Accordion (Éditeur Avancé)</span>
                                <button type="button" class="btn-add-service" onclick="addNewService()" style="background: #10b981; color: white; border: none; padding: 5px 10px; border-radius: 15px; font-size: 11px;">+ Ajouter</button>
                            </label>
                            <div id="servicesAccordionAdvancedEditor" class="services-advanced-editor">
                                <!-- Services seront générés dynamiquement -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONTACT BLOCKS -->
        <div class="block-category">
            <div class="category-header">
                <div class="category-icon">📞</div>
                <div class="category-title">Contact Blocks</div>
                <div class="category-count">6</div>
            </div>
            <div class="blocks-grid">
                <div class="block-item selected" data-block="contact" data-variant="split-map">
                    <div class="block-icon">🗺️</div>
                    <div class="block-name">Split Map</div>
                    <div class="block-variant">Form + Google Maps</div>
                    <div class="block-features">
                        <span class="block-feature">Maps</span>
                    </div>
                </div>
                
                <div class="block-item" data-block="contact" data-variant="floating-cards">
                    <div class="block-icon">💳</div>
                    <div class="block-name">Floating Cards</div>
                    <div class="block-variant">Cartes de contact</div>
                    <div class="block-features">
                        <span class="block-feature">Cards</span>
                    </div>
                </div>
                
                <div class="block-item" data-block="contact" data-variant="wizard">
                    <div class="block-icon">🧙</div>
                    <div class="block-name">Wizard</div>
                    <div class="block-variant">Multi-étapes</div>
                    <div class="block-features">
                        <span class="block-feature">Guidé</span>
                    </div>
                </div>
                
                <div class="block-item" data-block="contact" data-variant="calculator">
                    <div class="block-icon">🧮</div>
                    <div class="block-name">Calculator</div>
                    <div class="block-variant">Calculateur prix</div>
                    <div class="block-features">
                        <span class="block-feature">Prix</span>
                    </div>
                </div>
                
                <div class="block-item" data-block="contact" data-variant="testimonials-sync">
                    <div class="block-icon">⭐</div>
                    <div class="block-name">Testimonials Sync</div>
                    <div class="block-variant">Google Reviews</div>
                    <div class="block-features">
                        <span class="block-feature">Reviews</span>
                    </div>
                </div>
                
                <div class="block-item" data-block="contact" data-variant="social-proof">
                    <div class="block-icon">🛡️</div>
                    <div class="block-name">Social Proof</div>
                    <div class="block-variant">Badges confiance</div>
                    <div class="block-features">
                        <span class="block-feature">Trust</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Génération -->
        <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #3b82f6;">
            <button class="btn btn-success" id="generateProject" style="width: 100%; padding: 15px; font-size: 16px;">
                🚀 Générer Projet Révolutionnaire
            </button>
        </div>
    </div>

    <!-- Status bar -->
    <div class="status-bar">
        <div>
            <span class="status-dot"></span>
            <span id="statusText">AWEMA Studio Pro v2.0 - Prêt</span>
        </div>
        <div>
            <span>Blocs: 34 • Google Maps • Phase 1 Révolutionnaire</span>
        </div>
    </div>

    <script>
        console.log('🚀 AWEMA v2.0 Ultra Clean Fixed - Chargement...');

        // Configuration
        var config = {
            company: {
                name: 'ElectroMax Pro',
                trade: 'electricien',
                city: 'Paris',
                phone: '01 23 45 67 89',
                email: 'contact@electromax.fr',
                services: ['Installation électrique', 'Dépannage urgent', 'Rénovation', 'Mise aux normes', 'Domotique']
            },
            design: {
                color: '#3b82f6'
            },
            seo: {
                title: 'ElectroMax Pro - Électricien Paris | Intervention 24h/7j',
                description: 'Électricien expert à Paris. Intervention rapide 24h/7j. Devis gratuit.'
            },
            blocks: {
                hero: { type: 'hero', variant: 'ultra-pro' },
                services: { type: 'services', variant: 'ultra-pro' },
                contact: { type: 'contact', variant: 'split-map' }
            },
            device: 'desktop',
            api: {
                googleMapsKey: 'AIzaSyCESD10stchdA2iIYB2iQqtfB1YNH1G4wc'
            }
        };

        // Palettes couleurs
        var palettes = {
            electricien: [
                { color: '#3b82f6', name: 'Bleu Électrique' },
                { color: '#1e40af', name: 'Bleu Profond' },
                { color: '#fbbf24', name: 'Jaune Voltage' },
                { color: '#8b5cf6', name: 'Violet Tech' }
            ],
            plombier: [
                { color: '#0ea5e9', name: 'Cyan Aqua' },
                { color: '#f97316', name: 'Orange Flow' },
                { color: '#10b981', name: 'Vert Aqua' },
                { color: '#0369a1', name: 'Bleu Océan' }
            ],
            chauffagiste: [
                { color: '#ea580c', name: 'Orange Flamme' },
                { color: '#dc2626', name: 'Rouge Feu' },
                { color: '#f59e0b', name: 'Jaune Chaleur' },
                { color: '#7c2d12', name: 'Marron Bois' }
            ],
            multi: [
                { color: '#6366f1', name: 'Indigo Pro' },
                { color: '#8b5cf6', name: 'Violet Premium' },
                { color: '#06b6d4', name: 'Cyan Tech' },
                { color: '#10b981', name: 'Vert Success' }
            ]
        };

        // Génération HTML
        function generateHTML() {
            updateStatus('Génération HTML...');
            
            var heroVariant = config.blocks.hero.variant;
            var servicesVariant = config.blocks.services.variant;
            var contactVariant = config.blocks.contact.variant;
            
            var html = '';
            html += '<!DOCTYPE html>';
            html += '<html lang="fr">';
            html += '<head>';
            html += '<meta charset="UTF-8">';
            html += '<meta name="viewport" content="width=device-width, initial-scale=1.0">';
            html += '<title>' + config.seo.title + '</title>';
            html += '<meta name="description" content="' + config.seo.description + '">';
            html += '<style>';
            
            // CSS de base
            html += '* { margin: 0; padding: 0; box-sizing: border-box; }';
            html += 'body { font-family: Arial, sans-serif; line-height: 1.6; color: #1f2937; }';
            html += '.container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }';
            
            // Header
            html += 'header { background: rgba(255,255,255,0.95); backdrop-filter: blur(20px); padding: 1rem 0; position: fixed; width: 100%; top: 0; z-index: 1000; box-shadow: 0 2px 20px rgba(0,0,0,0.1); }';
            html += 'nav { display: flex; justify-content: space-between; align-items: center; }';
            html += '.logo { font-size: 1.8rem; font-weight: 800; background: linear-gradient(135deg, ' + config.design.color + ', #8b5cf6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }';
            html += '.nav-menu { display: flex; list-style: none; gap: 2rem; }';
            html += '.nav-link { color: #374151; text-decoration: none; font-weight: 500; transition: color 0.3s; }';
            html += '.nav-link:hover { color: ' + config.design.color + '; }';
            html += '.nav-cta { background: linear-gradient(135deg, ' + config.design.color + ', #8b5cf6); color: white; padding: 0.75rem 1.5rem; border-radius: 50px; text-decoration: none; font-weight: 600; transition: transform 0.3s; }';
            html += '.nav-cta:hover { transform: translateY(-2px); }';
            
            // Hero base
            html += '.hero { min-height: 100vh; background: linear-gradient(135deg, ' + config.design.color + ', #1e40af, #8b5cf6); position: relative; display: flex; align-items: center; overflow: hidden; color: white; }';
            html += '.hero::before { content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(circle at 30% 20%, rgba(255,255,255,0.2) 0%, transparent 50%); }';
            html += '.hero-content { position: relative; z-index: 2; }';
            html += '.hero-title { font-size: clamp(3rem, 6vw, 4.5rem); font-weight: 900; margin-bottom: 1.5rem; }';
            html += '.hero-subtitle { font-size: 1.6rem; margin-bottom: 2rem; opacity: 0.9; }';
            html += '.hero-description { font-size: 1.2rem; margin-bottom: 3rem; opacity: 0.8; max-width: 600px; }';
            
            // Hero Ultra Pro
            html += '.hero-ultra-pro { background: linear-gradient(135deg, ' + config.design.color + ', #8b5cf6, #ec4899); position: relative; }';
            html += '.hero-glassmorphism { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.05); backdrop-filter: blur(20px); z-index: 1; }';
            html += '.hero-ultra-title { background: linear-gradient(45deg, #ffffff, #f1f5f9, #ffffff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 0 0 30px rgba(255,255,255,0.5); animation: glow 2s ease-in-out infinite alternate; }';
            html += '@keyframes glow { from { text-shadow: 0 0 20px rgba(255,255,255,0.5); } to { text-shadow: 0 0 40px rgba(255,255,255,0.8); } }';
            html += '.cta-ultra { background: linear-gradient(45deg, #ffffff, #f8fafc); color: ' + config.design.color + '; box-shadow: 0 10px 30px rgba(255,255,255,0.3); transform: perspective(1000px) rotateX(15deg); }';
            html += '.cta-ultra:hover { transform: perspective(1000px) rotateX(0deg) translateY(-5px); }';
            
            // Hero Video
            html += '.hero-video { position: relative; min-height: 100vh; background: #000; }';
            html += '.hero-video-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 1; }';
            html += '.hero-video-fallback { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; z-index: 1; }';
            html += '.hero-video-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(45deg, rgba(0,0,0,0.7), rgba(' + config.design.color.replace('#', '').match(/.{2}/g).map(x => parseInt(x, 16)).join(',') + ',0.8)); z-index: 2; }';
            html += '.hero-video-title { font-size: clamp(2.5rem, 5vw, 4rem); text-shadow: 2px 2px 10px rgba(0,0,0,0.8); }';
            html += '.cta-video { background: linear-gradient(45deg, #ff4d6d, #ff8a80); border: none; box-shadow: 0 15px 35px rgba(255, 77, 109, 0.4); }';
            html += '.cta-video:hover { transform: translateY(-3px); box-shadow: 0 20px 40px rgba(255, 77, 109, 0.6); }';
            
            // Hero Split Diagonal  
            html += '.hero-split-diagonal { position: relative; min-height: 100vh; overflow: hidden; }';
            html += '.hero-split-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; clip-path: polygon(0 0, 70% 0, 60% 100%, 0 100%); }';
            html += '.hero-split-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, ' + config.design.color + 'aa, #8b5cf6aa); clip-path: polygon(0 0, 70% 0, 60% 100%, 0 100%); }';
            html += '.hero-split-content { position: relative; z-index: 2; display: flex; align-items: center; min-height: 100vh; background: linear-gradient(135deg, transparent 60%, ' + config.design.color + ' 60%); }';
            html += '.hero-split-title { font-size: clamp(3rem, 7vw, 5rem); font-weight: 900; background: linear-gradient(45deg, #ffffff, #f1f5f9); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }';
            html += '.cta-split { background: linear-gradient(45deg, #ffffff, #f8fafc); color: ' + config.design.color + '; transform: skew(-10deg); }';
            html += '.cta-split:hover { transform: skew(-5deg) translateY(-3px); }';
            
            // Hero Floating Elements
            html += '.hero-floating { position: relative; overflow: hidden; }';
            html += '.floating-elements { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }';
            html += '.floating-circle, .floating-square, .floating-triangle { position: absolute; opacity: 0.1; animation: float 6s ease-in-out infinite; }';
            html += '.floating-1 { top: 20%; left: 10%; width: 60px; height: 60px; background: #ffffff; border-radius: 50%; animation-delay: 0s; }';
            html += '.floating-2 { top: 60%; right: 15%; width: 40px; height: 40px; background: #f1f5f9; transform: rotate(45deg); animation-delay: 2s; }';
            html += '.floating-3 { bottom: 30%; left: 20%; width: 0; height: 0; border-left: 25px solid transparent; border-right: 25px solid transparent; border-bottom: 50px solid #ffffff; animation-delay: 4s; }';
            html += '.floating-4 { top: 40%; right: 30%; width: 80px; height: 80px; background: linear-gradient(45deg, #ffffff22, #f1f5f922); border-radius: 50%; animation-delay: 1s; }';
            html += '@keyframes float { 0%, 100% { transform: translateY(0px) rotate(0deg); } 50% { transform: translateY(-20px) rotate(10deg); } }';
            html += '.hero-floating-content { position: relative; z-index: 2; }';
            html += '.hero-floating-title { animation: glow 3s ease-in-out infinite alternate; }';
            html += '.cta-floating { background: linear-gradient(45deg, #ec4899, #8b5cf6); box-shadow: 0 15px 35px rgba(236, 72, 153, 0.4); }';
            
            // Hero Magazine
            html += '.hero-magazine { min-height: 100vh; background: #f8fafc; color: #1f2937; }';
            html += '.magazine-grid { display: grid; grid-template-columns: 1fr 1fr; min-height: 100vh; }';
            html += '.magazine-image { background-size: cover; background-position: center; position: relative; }';
            html += '.magazine-image::after { content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(45deg, ' + config.design.color + '22, transparent); }';
            html += '.magazine-content { padding: 4rem; display: flex; flex-direction: column; justify-content: center; }';
            html += '.magazine-header { display: flex; justify-content: space-between; margin-bottom: 2rem; font-size: 0.875rem; font-weight: 600; color: ' + config.design.color + '; }';
            html += '.magazine-title { font-size: clamp(2.5rem, 5vw, 4rem); font-weight: 900; margin-bottom: 1rem; line-height: 1.1; }';
            html += '.magazine-subtitle { font-size: 1.5rem; color: #6b7280; margin-bottom: 2rem; }';
            html += '.magazine-excerpt { font-size: 1.125rem; line-height: 1.6; margin-bottom: 2rem; color: #4b5563; }';
            html += '.magazine-meta { display: flex; gap: 2rem; margin-bottom: 2rem; font-size: 0.875rem; color: #9ca3af; }';
            html += '.cta-magazine { background: ' + config.design.color + '; color: white; }';
            
            // Hero Interactive Stats
            html += '.hero-stats { position: relative; }';
            html += '.stats-overlay { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, rgba(0,0,0,0.7), rgba(' + config.design.color.replace("#", "").match(/.{2}/g).map(x => parseInt(x, 16)).join(",") + ',0.8)); }';
            html += '.hero-stats-layout { display: grid; grid-template-columns: 1fr 1fr; gap: 4rem; align-items: center; position: relative; z-index: 2; }';
            html += '.hero-stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; }';
            html += '.stat-card { background: rgba(255,255,255,0.1); backdrop-filter: blur(20px); padding: 1.5rem; border-radius: 16px; text-align: center; border: 1px solid rgba(255,255,255,0.2); transition: transform 0.3s; }';
            html += '.stat-card:hover { transform: translateY(-5px) scale(1.05); }';
            html += '.stat-number { font-size: 2.5rem; font-weight: 900; color: #ffffff; margin-bottom: 0.5rem; }';
            html += '.stat-label { font-size: 0.875rem; color: rgba(255,255,255,0.8); }';
            
            // Hero Corporate Clean  
            html += '.hero-corporate { position: relative; min-height: 100vh; background: linear-gradient(135deg, #f8fafc, #ffffff); color: #1f2937; }';
            html += '.corporate-bg { position: absolute; top: 0; left: 0; right: 0; bottom: 0; }';
            html += '.corporate-image { position: absolute; top: 0; right: 0; width: 50%; height: 100%; background-size: cover; background-position: center; }';
            html += '.corporate-overlay { position: absolute; top: 0; right: 0; width: 50%; height: 100%; background: linear-gradient(90deg, #f8fafc 0%, rgba(248,250,252,0.8) 50%, rgba(' + config.design.color.replace("#", "").match(/.{2}/g).map(x => parseInt(x, 16)).join(",") + ',0.2) 100%); }';
            html += '.corporate-content { position: relative; z-index: 2; max-width: 50%; padding: 4rem 0; display: flex; flex-direction: column; justify-content: center; min-height: 100vh; }';
            html += '.corporate-badge { display: inline-block; background: ' + config.design.color + '; color: white; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.75rem; font-weight: 700; margin-bottom: 2rem; }';
            html += '.corporate-title { font-size: clamp(3rem, 6vw, 4.5rem); font-weight: 900; margin-bottom: 1.5rem; }';
            html += '.corporate-subtitle { font-size: 1.5rem; color: #6b7280; margin-bottom: 2rem; }';
            html += '.corporate-description { font-size: 1.125rem; line-height: 1.6; margin-bottom: 2rem; color: #4b5563; }';
            html += '.corporate-features { margin-bottom: 3rem; }';
            html += '.feature-item { margin-bottom: 0.75rem; font-weight: 500; color: #059669; }';
            html += '.cta-corporate { background: linear-gradient(45deg, ' + config.design.color + ', #1e40af); color: white; }';
            
            // Hero Parallax Layers
            html += '.hero-parallax { position: relative; min-height: 100vh; overflow: hidden; perspective: 1000px; }';
            html += '.parallax-layer { position: absolute; top: 0; left: 0; width: 100%; height: 120%; will-change: transform; }';
            html += '.parallax-bg { background-size: cover; background-position: center; transform: translateZ(-1px) scale(2); }';
            html += '.parallax-overlay-1 { background: linear-gradient(45deg, ' + config.design.color + '33, transparent); transform: translateZ(-0.5px) scale(1.5); }';
            html += '.parallax-overlay-2 { background: radial-gradient(circle at 30% 70%, rgba(139, 92, 246, 0.3), transparent); transform: translateZ(-0.2px) scale(1.2); }';
            html += '.parallax-content { position: relative; z-index: 10; display: flex; align-items: center; min-height: 100vh; transform: translateZ(0); }';
            html += '.parallax-title { font-size: clamp(3rem, 7vw, 5rem); font-weight: 900; text-shadow: 2px 2px 20px rgba(0,0,0,0.5); }';
            html += '.cta-parallax { background: linear-gradient(45deg, #8b5cf6, #ec4899); transform: perspective(500px) rotateX(15deg); }';
            html += '.cta-parallax:hover { transform: perspective(500px) rotateX(0deg) translateY(-5px); }';
            
            // Hero Centered Minimal
            html += '.hero-minimal { position: relative; min-height: 100vh; display: flex; align-items: center; justify-content: center; }';
            html += '.minimal-bg { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-size: cover; background-position: center; filter: grayscale(50%) brightness(0.7); }';
            html += '.minimal-overlay { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(circle, transparent 40%, rgba(0,0,0,0.8) 100%); }';
            html += '.minimal-content { position: relative; z-index: 2; text-align: center; }';
            html += '.minimal-container { max-width: 600px; }';
            html += '.minimal-title { font-size: clamp(2.5rem, 6vw, 4rem); font-weight: 300; margin-bottom: 2rem; letter-spacing: 2px; }';
            html += '.minimal-line { width: 60px; height: 2px; background: ' + config.design.color + '; margin: 0 auto 2rem; }';
            html += '.minimal-subtitle { font-size: 1.25rem; margin-bottom: 2rem; opacity: 0.9; font-weight: 300; }';
            html += '.minimal-description { font-size: 1rem; margin-bottom: 3rem; opacity: 0.8; }';
            html += '.cta-minimal { background: transparent; border: 2px solid ' + config.design.color + '; color: ' + config.design.color + '; padding: 1rem 3rem; }';
            html += '.cta-minimal:hover { background: ' + config.design.color + '; color: white; }';
            
            // Hero Cards Layout
            html += '.hero-cards { position: relative; }';
            html += '.cards-overlay { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, rgba(0,0,0,0.8), rgba(' + config.design.color.replace("#", "").match(/.{2}/g).map(x => parseInt(x, 16)).join(",") + ',0.7)); }';
            html += '.hero-cards-layout { position: relative; z-index: 2; padding: 4rem 0; }';
            html += '.cards-header { text-align: center; margin-bottom: 4rem; }';
            html += '.cards-title { font-size: clamp(3rem, 6vw, 4.5rem); margin-bottom: 1rem; }';
            html += '.hero-cards-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-bottom: 4rem; }';
            html += '.hero-card { background: rgba(255,255,255,0.1); backdrop-filter: blur(20px); padding: 2rem; border-radius: 20px; text-align: center; border: 1px solid rgba(255,255,255,0.2); transition: all 0.3s; }';
            html += '.hero-card:hover { transform: translateY(-10px) scale(1.05); background: rgba(255,255,255,0.2); }';
            html += '.card-icon { font-size: 3rem; margin-bottom: 1rem; }';
            html += '.card-title { font-size: 1.25rem; font-weight: 700; margin-bottom: 0.5rem; }';
            html += '.card-desc { font-size: 0.875rem; opacity: 0.8; }';
            html += '.cta-cards { background: linear-gradient(45deg, #ec4899, #8b5cf6); margin: 0 auto; display: table; }';
            
            // CTA
            html += '.cta-button { display: inline-block; background: rgba(255,255,255,0.9); color: ' + config.design.color + '; padding: 1rem 2rem; border-radius: 50px; text-decoration: none; font-weight: 700; margin-right: 1rem; transition: transform 0.3s; }';
            html += '.cta-button:hover { transform: translateY(-3px); }';
            html += '.cta-button-outline { background: transparent; border: 2px solid rgba(255,255,255,0.8); color: white; }';
            
            // Services
            html += '.services { padding: 6rem 0; background: #f8fafc; }';
            html += '.section-title { text-align: center; font-size: 3rem; font-weight: 800; margin-bottom: 4rem; color: #1f2937; }';
            html += '.services-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; }';
            html += '.service-card { background: white; padding: 2.5rem; border-radius: 20px; text-align: center; transition: transform 0.3s; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }';
            html += '.service-card:hover { transform: translateY(-10px); }';
            html += '.service-icon { font-size: 3rem; margin-bottom: 1.5rem; }';
            html += '.service-title { font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem; color: #1f2937; }';
            html += '.service-desc { color: #6b7280; margin-bottom: 1.5rem; }';
            html += '.service-price { font-size: 1.2rem; font-weight: 700; color: ' + config.design.color + '; }';
            
            // CSS pour Services Ultra-Pro
            html += '.services-ultra-pro { position: relative; padding: 8rem 0; background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%); overflow: hidden; }';
            html += '.services-particles { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }';
            html += '.particle { position: absolute; width: 8px; height: 8px; background: ' + config.design.color + '; border-radius: 50%; opacity: 0.6; animation: float 6s ease-in-out infinite; }';
            html += '.particle-1 { top: 10%; left: 10%; animation-delay: 0s; }';
            html += '.particle-2 { top: 20%; left: 80%; animation-delay: 1s; }';
            html += '.particle-3 { top: 60%; left: 20%; animation-delay: 2s; }';
            html += '.particle-4 { top: 80%; left: 70%; animation-delay: 3s; }';
            html += '.particle-5 { top: 30%; left: 50%; animation-delay: 4s; }';
            html += '.particle-6 { top: 70%; left: 90%; animation-delay: 5s; }';
            html += '.particle-7 { top: 40%; left: 5%; animation-delay: 2.5s; }';
            html += '.particle-8 { top: 90%; left: 40%; animation-delay: 1.5s; }';
            html += '@keyframes float { 0%, 100% { transform: translateY(0px) rotate(0deg); } 50% { transform: translateY(-20px) rotate(180deg); } }';
            html += '.services-ultra-title { color: white; font-size: 4rem; font-weight: 900; text-align: center; margin-bottom: 1rem; background: linear-gradient(45deg, white, ' + config.design.color + '); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }';
            html += '.services-subtitle { color: #94a3b8; text-align: center; font-size: 1.2rem; margin-bottom: 4rem; }';
            html += '.services-ultra-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 2rem; }';
            html += '.service-ultra-card { background: rgba(255,255,255,0.05); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.1); border-radius: 24px; padding: 2.5rem; text-align: center; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); position: relative; overflow: hidden; }';
            html += '.service-ultra-card::before { content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(45deg, ' + config.design.color + '22, transparent, ' + config.design.color + '11); opacity: 0; transition: opacity 0.3s; }';
            html += '.service-ultra-card:hover::before { opacity: 1; }';
            html += '.service-ultra-card:hover { transform: translateY(-10px) scale(1.02); box-shadow: 0 25px 50px rgba(0,0,0,0.3), 0 0 0 1px ' + config.design.color + '44; }';
            html += '.service-ultra-icon { position: relative; margin-bottom: 1.5rem; }';
            html += '.icon-bg { width: 80px; height: 80px; background: linear-gradient(45deg, ' + config.design.color + ', ' + config.design.color + '88); border-radius: 50%; margin: 0 auto; display: flex; align-items: center; justify-content: center; position: relative; }';
            html += '.icon-bg::before { content: ""; position: absolute; inset: -2px; background: linear-gradient(45deg, ' + config.design.color + ', transparent, ' + config.design.color + '); border-radius: 50%; z-index: -1; }';
            html += '.icon-emoji { font-size: 2rem; }';
            html += '.service-ultra-title { color: white; font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem; }';
            html += '.service-ultra-desc { color: #94a3b8; margin-bottom: 1.5rem; line-height: 1.6; }';
            html += '.service-ultra-features { display: flex; flex-wrap: wrap; gap: 0.5rem; justify-content: center; margin-bottom: 1.5rem; }';
            html += '.feature { background: rgba(255,255,255,0.1); color: #10b981; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.8rem; border: 1px solid rgba(16,185,129,0.3); }';
            html += '.service-ultra-price { color: ' + config.design.color + '; font-size: 1.3rem; font-weight: 800; margin-bottom: 1.5rem; }';
            html += '.service-ultra-btn { background: linear-gradient(45deg, ' + config.design.color + ', ' + config.design.color + '88); color: white; border: none; padding: 12px 30px; border-radius: 50px; font-weight: 600; cursor: pointer; transition: all 0.3s; width: 100%; }';
            html += '.service-ultra-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 25px ' + config.design.color + '44; }';
            
            // CSS pour Services Carousel
            html += '.services-carousel { padding: 6rem 0; background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); }';
            html += '.services-carousel-container { position: relative; max-width: 1200px; margin: 0 auto; }';
            html += '.services-carousel-navigation { display: flex; justify-content: space-between; margin-bottom: 2rem; }';
            html += '.carousel-btn { width: 50px; height: 50px; border: none; border-radius: 50%; background: white; color: ' + config.design.color + '; font-size: 1.5rem; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: all 0.3s; }';
            html += '.carousel-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }';
            html += '.services-carousel-wrapper { overflow: hidden; border-radius: 20px; }';
            html += '.services-carousel-track { display: flex; transition: transform 0.5s ease; }';
            html += '.service-carousel-card { min-width: 350px; background: white; margin-right: 2rem; padding: 2rem; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: transform 0.3s; }';
            html += '.service-carousel-card:hover { transform: translateY(-5px); }';
            html += '.service-carousel-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; }';
            html += '.service-carousel-icon { font-size: 2.5rem; }';
            html += '.service-carousel-badge { background: linear-gradient(45deg, ' + config.design.color + ', ' + config.design.color + '88); color: white; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }';
            html += '.service-carousel-title { font-size: 1.4rem; font-weight: 700; color: #1f2937; margin-bottom: 1rem; }';
            html += '.service-carousel-desc { color: #6b7280; margin-bottom: 1.5rem; line-height: 1.6; }';
            html += '.service-carousel-list { list-style: none; margin-bottom: 1.5rem; }';
            html += '.service-carousel-list li { color: #10b981; margin-bottom: 0.5rem; font-size: 0.9rem; }';
            html += '.service-carousel-footer { display: flex; justify-content: space-between; align-items: center; }';
            html += '.service-carousel-price { color: ' + config.design.color + '; font-weight: 700; }';
            html += '.service-carousel-price span { font-size: 1.3rem; }';
            html += '.service-carousel-btn { background: ' + config.design.color + '; color: white; border: none; padding: 8px 20px; border-radius: 20px; font-weight: 600; cursor: pointer; transition: all 0.3s; }';
            html += '.service-carousel-btn:hover { transform: translateY(-1px); box-shadow: 0 5px 15px ' + config.design.color + '44; }';
            html += '.carousel-indicators { display: flex; justify-content: center; gap: 0.5rem; margin-top: 2rem; }';
            html += '.carousel-indicator { width: 12px; height: 12px; border-radius: 50%; background: #d1d5db; cursor: pointer; transition: background 0.3s; }';
            html += '.carousel-indicator.active { background: ' + config.design.color + '; }';
            
            // CSS pour Services Masonry
            html += '.services-masonry { padding: 6rem 0; background: #f8fafc; }';
            html += '.services-filters { display: flex; justify-content: center; gap: 1rem; margin-bottom: 3rem; flex-wrap: wrap; }';
            html += '.filter-btn { background: white; border: 2px solid #e5e7eb; color: #6b7280; padding: 0.8rem 1.5rem; border-radius: 50px; cursor: pointer; font-weight: 600; transition: all 0.3s; }';
            html += '.filter-btn.active, .filter-btn:hover { background: ' + config.design.color + '; color: white; border-color: ' + config.design.color + '; transform: translateY(-2px); }';
            html += '.services-masonry-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; }';
            html += '.service-masonry-item { position: relative; border-radius: 20px; overflow: hidden; cursor: pointer; transition: transform 0.3s; }';
            html += '.service-masonry-item.tall { grid-row: span 2; }';
            html += '.service-masonry-item.short { grid-row: span 1; }';
            html += '.service-masonry-item.normal { grid-row: span 1; }';
            html += '.service-masonry-item:hover { transform: scale(1.02); }';
            html += '.masonry-item-bg { position: absolute; inset: 0; background: linear-gradient(45deg, ' + config.design.color + ', ' + config.design.color + '88); }';
            html += '.masonry-item-overlay { position: absolute; inset: 0; background: linear-gradient(45deg, rgba(0,0,0,0.7), rgba(0,0,0,0.3)); }';
            html += '.masonry-item-content { position: relative; z-index: 2; padding: 2rem; color: white; height: 100%; display: flex; flex-direction: column; justify-content: space-between; min-height: 250px; }';
            html += '.masonry-item-icon { font-size: 3rem; margin-bottom: 1rem; }';
            html += '.masonry-item-title { font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem; }';
            html += '.masonry-item-desc { margin-bottom: 1rem; line-height: 1.6; }';
            html += '.masonry-item-tags { display: flex; gap: 0.5rem; margin-bottom: 1rem; }';
            html += '.tag { background: rgba(255,255,255,0.2); padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.8rem; }';
            html += '.masonry-item-price { font-size: 1.2rem; font-weight: 700; }';
            html += '.masonry-item-hover { position: absolute; inset: 0; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s; z-index: 3; }';
            html += '.service-masonry-item:hover .masonry-item-hover { opacity: 1; }';
            html += '.masonry-btn { background: white; color: ' + config.design.color + '; border: none; padding: 12px 30px; border-radius: 50px; font-weight: 600; cursor: pointer; transition: all 0.3s; }';
            html += '.masonry-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(255,255,255,0.3); }';
            
            // CSS pour Services Tabs
            html += '.services-tabs { padding: 6rem 0; background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%); }';
            html += '.services-tabs-container { max-width: 1200px; margin: 0 auto; }';
            html += '.services-tabs-nav { display: flex; justify-content: center; gap: 1rem; margin-bottom: 3rem; flex-wrap: wrap; }';
            html += '.tab-btn { background: white; border: none; padding: 1rem 2rem; border-radius: 50px; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; gap: 0.5rem; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }';
            html += '.tab-btn:hover, .tab-btn.active { background: ' + config.design.color + '; color: white; transform: translateY(-3px); box-shadow: 0 8px 25px ' + config.design.color + '44; }';
            html += '.tab-icon { font-size: 1.2rem; }';
            html += '.tab-name { font-weight: 600; }';
            html += '.services-tabs-content { position: relative; }';
            html += '.tab-panel { display: none; }';
            html += '.tab-panel.active { display: block; animation: fadeIn 0.5s; }';
            html += '@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }';
            html += '.tab-panel-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 2rem; }';
            html += '.tab-service-card { background: white; padding: 2rem; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: transform 0.3s; }';
            html += '.tab-service-card:hover { transform: translateY(-5px); }';
            html += '.tab-service-icon { font-size: 2.5rem; margin-bottom: 1rem; }';
            html += '.tab-service-title { font-size: 1.3rem; font-weight: 700; color: #1f2937; margin-bottom: 1rem; }';
            html += '.tab-service-desc { color: #6b7280; margin-bottom: 1.5rem; }';
            html += '.tab-service-features { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1.5rem; }';
            html += '.tab-service-features span { background: #f0fdf4; color: #10b981; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.8rem; }';
            html += '.tab-service-price { color: ' + config.design.color + '; font-size: 1.2rem; font-weight: 700; margin-bottom: 1rem; }';
            html += '.tab-service-btn { background: ' + config.design.color + '; color: white; border: none; padding: 10px 25px; border-radius: 50px; font-weight: 600; cursor: pointer; transition: all 0.3s; width: 100%; }';
            html += '.tab-service-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px ' + config.design.color + '44; }';
            
            // CSS pour Services Timeline
            html += '.services-timeline { padding: 6rem 0; background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); color: white; }';
            html += '.services-timeline-container { position: relative; max-width: 800px; margin: 0 auto; }';
            html += '.timeline-line { position: absolute; left: 50%; top: 0; bottom: 0; width: 4px; background: linear-gradient(to bottom, ' + config.design.color + ', ' + config.design.color + '44); transform: translateX(-50%); }';
            html += '.timeline-item { display: flex; margin-bottom: 4rem; position: relative; }';
            html += '.timeline-item:nth-child(even) { flex-direction: row-reverse; }';
            html += '.timeline-marker { position: absolute; left: 50%; transform: translateX(-50%); z-index: 2; display: flex; flex-direction: column; align-items: center; gap: 0.5rem; }';
            html += '.timeline-number { width: 60px; height: 60px; background: linear-gradient(45deg, ' + config.design.color + ', ' + config.design.color + '88); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 1.2rem; border: 4px solid #1e293b; }';
            html += '.timeline-icon { font-size: 1.5rem; }';
            html += '.timeline-content { background: rgba(255,255,255,0.05); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; padding: 2rem; margin: 0 3rem; width: calc(50% - 3rem); }';
            html += '.timeline-title { font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem; color: ' + config.design.color + '; }';
            html += '.timeline-desc { color: #94a3b8; margin-bottom: 1.5rem; }';
            html += '.timeline-services { display: flex; flex-direction: column; gap: 0.8rem; }';
            html += '.timeline-service { display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.05); padding: 0.8rem; border-radius: 8px; }';
            html += '.timeline-service-name { font-weight: 600; }';
            html += '.timeline-service-price { color: ' + config.design.color + '; font-weight: 700; }';
            
            // CSS pour Services Comparison Table
            html += '.services-comparison { padding: 6rem 0; background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); }';
            html += '.comparison-table-container { max-width: 1000px; margin: 0 auto; overflow-x: auto; }';
            html += '.comparison-table { display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 1px; background: #d1d5db; border-radius: 16px; overflow: hidden; }';
            html += '.comparison-cell { background: white; padding: 1.5rem; text-align: center; }';
            html += '.comparison-feature-header { background: #1f2937; color: white; font-weight: 700; }';
            html += '.comparison-plan-header { background: #f8fafc; font-weight: 700; font-size: 1.2rem; }';
            html += '.comparison-plan-header.recommended { background: ' + config.design.color + '; color: white; position: relative; }';
            html += '.comparison-plan-header.recommended::after { content: "RECOMMANDÉ"; position: absolute; top: -10px; left: 50%; transform: translateX(-50%); background: #10b981; color: white; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.7rem; }';
            html += '.comparison-feature { font-weight: 600; text-align: left; }';
            html += '.comparison-row:nth-child(even) .comparison-cell { background: #f8fafc; }';
            html += '.comparison-footer .comparison-cell { padding: 2rem 1.5rem; }';
            html += '.comparison-price { font-size: 1.3rem; font-weight: 800; color: ' + config.design.color + '; margin-bottom: 1rem; }';
            html += '.comparison-btn { background: ' + config.design.color + '; color: white; border: none; padding: 12px 30px; border-radius: 50px; font-weight: 600; cursor: pointer; transition: all 0.3s; width: 100%; }';
            html += '.comparison-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px ' + config.design.color + '44; }';
            html += '.comparison-btn.recommended { background: #10b981; }';
            
            // CSS pour Services Hexagon Grid
            html += '.services-hexagon { padding: 6rem 0; background: radial-gradient(circle at center, #1e293b 0%, #0f172a 100%); color: white; }';
            html += '.services-hexagon-container { max-width: 1000px; margin: 0 auto; }';
            html += '.hexagon-grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 2rem; }';
            html += '.hexagon-item { position: relative; transition: transform 0.3s; }';
            html += '.hexagon-item:hover { transform: scale(1.1); }';
            html += '.hexagon-shape { width: 140px; height: 140px; position: relative; }';
            html += '.hexagon-inner { width: 100%; height: 100%; background: linear-gradient(45deg, ' + config.design.color + ', ' + config.design.color + '88); clip-path: polygon(30% 0%, 70% 0%, 100% 50%, 70% 100%, 30% 100%, 0% 50%); display: flex; align-items: center; justify-content: center; position: relative; }';
            html += '.hexagon-inner::before { content: ""; position: absolute; inset: 2px; background: #1e293b; clip-path: polygon(30% 0%, 70% 0%, 100% 50%, 70% 100%, 30% 100%, 0% 50%); }';
            html += '.hexagon-content { position: relative; z-index: 2; text-align: center; }';
            html += '.hexagon-icon { font-size: 2rem; margin-bottom: 0.5rem; }';
            html += '.hexagon-title { font-size: 0.9rem; font-weight: 600; margin-bottom: 0.3rem; }';
            html += '.hexagon-price { font-size: 0.8rem; color: ' + config.design.color + '; font-weight: 700; }';
            html += '.hexagon-info { text-align: center; margin-top: 1rem; }';
            html += '.hexagon-info h4 { margin-bottom: 0.5rem; font-size: 1.1rem; }';
            html += '.hexagon-info p { color: #94a3b8; margin-bottom: 1rem; font-size: 0.9rem; }';
            html += '.hexagon-btn { background: ' + config.design.color + '; color: white; border: none; padding: 8px 20px; border-radius: 20px; font-weight: 600; cursor: pointer; transition: all 0.3s; }';
            html += '.hexagon-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px ' + config.design.color + '44; }';
            
            // CSS pour Services Accordion
            html += '.services-accordion { padding: 6rem 0; background: #f8fafc; }';
            html += '.services-accordion-container { max-width: 800px; margin: 0 auto; }';
            html += '.accordion-item { background: white; border-radius: 16px; margin-bottom: 1rem; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }';
            html += '.accordion-header { padding: 1.5rem 2rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; transition: all 0.3s; }';
            html += '.accordion-header:hover { background: #f8fafc; }';
            html += '.accordion-item.active .accordion-header { background: ' + config.design.color + '; color: white; }';
            html += '.accordion-header-left { display: flex; align-items: center; gap: 1rem; }';
            html += '.accordion-icon { font-size: 2rem; }';
            html += '.accordion-title { font-size: 1.3rem; font-weight: 700; margin-bottom: 0.3rem; }';
            html += '.accordion-subtitle { font-size: 0.9rem; opacity: 0.8; }';
            html += '.accordion-header-right { display: flex; align-items: center; gap: 1rem; }';
            html += '.accordion-price { font-weight: 700; }';
            html += '.accordion-chevron { font-size: 1.2rem; transition: transform 0.3s; }';
            html += '.accordion-item.active .accordion-chevron { transform: rotate(180deg); }';
            html += '.accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease; }';
            html += '.accordion-item.active .accordion-content { max-height: 500px; }';
            html += '.accordion-content-inner { padding: 0 2rem 2rem; display: grid; grid-template-columns: 2fr 1fr; gap: 2rem; }';
            html += '.accordion-description { color: #6b7280; margin-bottom: 1.5rem; line-height: 1.6; }';
            html += '.accordion-features { list-style: none; }';
            html += '.accordion-features li { color: #10b981; margin-bottom: 0.5rem; }';
            html += '.accordion-cta { display: flex; flex-direction: column; gap: 0.8rem; }';
            html += '.accordion-btn { border: none; padding: 10px 20px; border-radius: 50px; font-weight: 600; cursor: pointer; transition: all 0.3s; }';
            html += '.accordion-btn.primary { background: ' + config.design.color + '; color: white; }';
            html += '.accordion-btn.secondary { background: transparent; color: ' + config.design.color + '; border: 2px solid ' + config.design.color + '; }';
            html += '.accordion-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }';
            
            // Contact 
            html += '.contact { padding: 6rem 0; background: linear-gradient(135deg, ' + config.design.color + ', #1e40af); color: white; }';
            html += '.contact-title { text-align: center; font-size: 3rem; font-weight: 800; margin-bottom: 3rem; }';
            html += '.contact-split { display: grid; grid-template-columns: 1fr 1fr; gap: 4rem; align-items: start; }';
            html += '.contact-form { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); padding: 2rem; border-radius: 20px; margin-bottom: 2rem; }';
            html += '.contact-form h3 { margin-bottom: 1.5rem; font-size: 1.5rem; }';
            html += '.contact-form input, .contact-form select, .contact-form textarea { width: 100%; padding: 15px; margin-bottom: 1rem; border: none; border-radius: 10px; background: rgba(255,255,255,0.9); color: #1f2937; font-size: 16px; }';
            html += '.contact-form button { width: 100%; background: rgba(255,255,255,0.9); color: ' + config.design.color + '; border: none; padding: 15px; border-radius: 50px; font-weight: 700; font-size: 16px; cursor: pointer; transition: transform 0.3s; }';
            html += '.contact-form button:hover { transform: translateY(-2px); }';
            html += '.contact-item { display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem; padding: 1rem; background: rgba(255,255,255,0.1); border-radius: 10px; }';
            html += '.contact-icon { font-size: 1.5rem; }';
            html += 'footer { background: #1f2937; color: white; padding: 3rem 0; text-align: center; }';
            
            // Responsive
            html += '@media (max-width: 768px) { ';
            html += '.hero { min-height: 80vh; } ';
            html += '.hero-title { font-size: 2.5rem; } ';
            html += '.nav-menu { display: none; } ';
            html += '.contact-split { grid-template-columns: 1fr; } ';
            // Hero variants responsive
            html += '.magazine-grid { grid-template-columns: 1fr; } ';
            html += '.magazine-content { padding: 2rem; } ';
            html += '.hero-stats-layout { grid-template-columns: 1fr; gap: 2rem; } ';
            html += '.hero-stats-grid { grid-template-columns: 1fr 1fr; } ';
            html += '.corporate-content { max-width: 100%; padding: 2rem; } ';
            html += '.corporate-image { width: 100%; height: 50%; } ';
            html += '.corporate-overlay { width: 100%; height: 50%; background: linear-gradient(0deg, #f8fafc 0%, rgba(248,250,252,0.8) 50%, rgba(' + config.design.color.replace("#", "").match(/.{2}/g).map(x => parseInt(x, 16)).join(",") + ',0.2) 100%); } ';
            html += '.hero-cards-grid { grid-template-columns: 1fr; } ';
            html += '.hero-split-bg { clip-path: polygon(0 0, 100% 0, 100% 70%, 0 100%); } ';
            html += '.hero-split-overlay { clip-path: polygon(0 0, 100% 0, 100% 70%, 0 100%); } ';
            html += '.hero-split-content { background: linear-gradient(180deg, transparent 70%, ' + config.design.color + ' 70%); } ';
            html += ' }';
            
            html += '</style>';
            html += '<script async defer src="https://maps.googleapis.com/maps/api/js?key=' + config.api.googleMapsKey + '&libraries=geometry,marker&callback=initMap"></' + 'script>';
            html += '</head>';
            html += '<body>';
            
            // Header
            html += '<header>';
            html += '<nav class="container">';
            html += '<div class="logo">' + config.company.name + '</div>';
            html += '<ul class="nav-menu">';
            html += '<li><a href="#accueil" class="nav-link">Accueil</a></li>';
            html += '<li><a href="#services" class="nav-link">Services</a></li>';
            html += '<li><a href="#contact" class="nav-link">Contact</a></li>';
            html += '</ul>';
            html += '<a href="tel:' + config.company.phone + '" class="nav-cta">' + config.company.phone + '</a>';
            html += '</nav>';
            html += '</header>';
            
            // Hero - Généré selon le variant sélectionné
            var heroVariant = config.blocks.hero.variant;
            
            // Récupération des textes personnalisés selon le variant
            function getHeroTexts(variant) {
                var texts = {
                    title: config.company.name,
                    subtitle: 'Votre ' + config.company.trade + ' expert à ' + config.company.city,
                    description: config.seo.description,
                    ctaText: 'Nos Services',
                    ctaSecondary: 'Appeler',
                    ctaLink: '#services',
                    ctaSecondaryLink: 'tel:' + config.company.phone
                };
                
                // Fonction helper pour récupérer une valeur d'input
                function getValue(id, defaultValue) {
                    var element = document.getElementById(id);
                    return element ? (element.value || defaultValue) : defaultValue;
                }
                
                // Récupération selon le variant spécifique
                switch(variant) {
                    case 'ultra-pro':
                        texts.title = getValue('heroTitle', config.company.name);
                        texts.subtitle = getValue('heroSubtitle', '🚀 ' + config.company.trade.charAt(0).toUpperCase() + config.company.trade.slice(1) + ' Expert Ultra Pro');
                        texts.description = getValue('heroDescription', '✨ Innovation • Performance • Excellence depuis 2010');
                        texts.ctaText = getValue('heroCtaText', 'Découvrir');
                        texts.ctaSecondary = getValue('heroCtaSecondary', 'Appeler');
                        texts.ctaLink = getValue('heroCtaLink', '#services');
                        texts.ctaSecondaryLink = getValue('heroCtaSecondaryLink', 'tel:' + config.company.phone);
                        break;
                    case 'video':
                        texts.title = getValue('heroVideoTitle', '🎬 ' + config.company.name);
                        texts.subtitle = getValue('heroVideoSubtitle', 'Découvrez notre expertise en vidéo');
                        texts.description = getValue('heroVideoDescription', 'Une expérience immersive pour comprendre notre savoir-faire');
                        texts.ctaText = getValue('heroVideoCtaText', '▶ Voir nos réalisations');
                        texts.ctaLink = getValue('heroVideoCtaLink', '#services');
                        break;
                    case 'split-diagonal':
                        texts.title = getValue('heroSplitTitle', '⚡ ' + config.company.name);
                        texts.subtitle = getValue('heroSplitSubtitle', 'Design Asymétrique • Innovation Pure');
                        texts.description = getValue('heroSplitDescription', 'Une approche révolutionnaire qui sort des standards');
                        texts.ctaText = getValue('heroSplitCtaText', 'Explorer');
                        texts.ctaLink = getValue('heroSplitCtaLink', '#services');
                        break;
                    case 'floating-elements':
                        texts.title = getValue('heroFloatingTitle', '✨ ' + config.company.name);
                        texts.subtitle = getValue('heroFloatingSubtitle', 'Éléments en Mouvement • Dynamisme Pur');
                        texts.description = getValue('heroFloatingDescription', 'Une expérience visuelle immersive et moderne');
                        texts.ctaText = getValue('heroFloatingCtaText', 'Découvrir la magie');
                        texts.ctaLink = getValue('heroFloatingCtaLink', '#services');
                        break;
                    case 'interactive-stats':
                        texts.title = getValue('heroStatsTitle', config.company.name);
                        texts.subtitle = getValue('heroStatsSubtitle', 'Performance • Données • Excellence');
                        texts.description = getValue('heroStatsDescription', 'Les chiffres parlent d\'eux-mêmes');
                        texts.stat1 = getValue('heroStatsStat1', '500+ Projets réalisés');
                        texts.stat2 = getValue('heroStatsStat2', '15 Années d\'expérience');
                        texts.stat3 = getValue('heroStatsStat3', '98% Clients satisfaits');
                        texts.stat4 = getValue('heroStatsStat4', '24h Intervention rapide');
                        var showIcon = document.getElementById('heroStatsShowIcon');
                        texts.showIcon = showIcon ? showIcon.checked : true;
                        if (texts.showIcon && !texts.title.includes('📊')) {
                            texts.title = '📊 ' + texts.title;
                        } else if (!texts.showIcon && texts.title.includes('📊')) {
                            texts.title = texts.title.replace('📊 ', '');
                        }
                        break;
                    case 'magazine':
                        texts.title = getValue('heroMagazineTitle', config.company.name);
                        texts.subtitle = getValue('heroMagazineSubtitle', 'L\'Excellence Éditoriale');
                        texts.description = getValue('heroMagazineExcerpt', 'Un savoir-faire d\'exception raconté avec passion. Découvrez notre histoire, notre expertise et notre vision d\'avenir.');
                        texts.ctaText = getValue('heroMagazineCtaText', 'Lire l\'article');
                        texts.ctaLink = getValue('heroMagazineCtaLink', '#services');
                        texts.category = getValue('heroMagazineCategory', 'EXPERT');
                        texts.readTime = getValue('heroMagazineReadTime', '5 min de lecture');
                        texts.author = getValue('heroMagazineAuthor', config.company.name);
                        break;
                    case 'corporate-clean':
                        texts.title = getValue('heroCorporateTitle', '🏢 ' + config.company.name);
                        texts.subtitle = getValue('heroCorporateSubtitle', 'Solutions Professionnelles • Expertise Corporate');
                        texts.description = getValue('heroCorporateDescription', 'Une approche professionnelle et des solutions sur mesure');
                        texts.ctaText = getValue('heroCorporateCtaText', 'Nous contacter');
                        texts.ctaLink = getValue('heroCorporateCtaLink', '#contact');
                        texts.badge = getValue('heroCorporateBadge', 'EXCELLENCE');
                        texts.features = getValue('heroCorporateFeatures', '✓ Certification qualité&#10;✓ Garantie étendue&#10;✓ Service 24h/7j');
                        break;
                    case 'parallax-layers':
                        texts.title = getValue('heroParallaxTitle', '🌊 ' + config.company.name);
                        texts.subtitle = getValue('heroParallaxSubtitle', 'Effet 3D • Profondeur • Immersion');
                        texts.description = getValue('heroParallaxDescription', 'Une expérience visuelle en 3D qui vous transporte');
                        texts.ctaText = getValue('heroParallaxCtaText', 'Plonger dans l\'expérience');
                        texts.ctaLink = getValue('heroParallaxCtaLink', '#services');
                        break;
                    case 'centered-minimal':
                        texts.title = getValue('heroMinimalTitle', '⚪ ' + config.company.name);
                        texts.subtitle = getValue('heroMinimalSubtitle', 'Simplicité • Élégance • Efficacité');
                        texts.description = getValue('heroMinimalDescription', 'L\'essentiel exprimé avec élégance');
                        texts.ctaText = getValue('heroMinimalCtaText', 'Découvrir');
                        texts.ctaLink = getValue('heroMinimalCtaLink', '#services');
                        break;
                    case 'cards-layout':
                        texts.title = getValue('heroCardsTitle', '🃏 ' + config.company.name);
                        texts.subtitle = getValue('heroCardsSubtitle', 'Services • Features • Avantages');
                        texts.description = getValue('heroCardsDescription', 'Nos services présentés de manière moderne et attractive');
                        texts.ctaText = getValue('heroCardsCtaText', 'Voir tous nos services');
                        texts.ctaLink = getValue('heroCardsCtaLink', '#services');
                        texts.card1Title = getValue('heroCardsCard1Title', 'Installation');
                        texts.card1Desc = getValue('heroCardsCard1Desc', 'Installation complète et professionnelle');
                        texts.card2Title = getValue('heroCardsCard2Title', 'Maintenance');
                        texts.card2Desc = getValue('heroCardsCard2Desc', 'Maintenance préventive et curative');
                        texts.card3Title = getValue('heroCardsCard3Title', 'Dépannage');
                        texts.card3Desc = getValue('heroCardsCard3Desc', 'Intervention rapide 24h/7j');
                        break;
                }
                
                return texts;
            }
            
            var heroTexts = getHeroTexts(heroVariant);
            
            // Image de fond personnalisée
            var heroBgImage = (config.uploads && config.uploads['hero-bg']) ? 
                'background-image: url(' + config.uploads['hero-bg'].blobUrl + '); background-size: cover; background-position: center;' : '';
            
            switch(heroVariant) {
                case 'ultra-pro':
                    html += '<section class="hero hero-ultra-pro" id="accueil" style="' + heroBgImage + '">';
                    html += '<div class="hero-glassmorphism"></div>';
                    html += '<div class="container">';
                    html += '<div class="hero-content">';
                    html += '<h1 class="hero-title hero-ultra-title">' + heroTexts.title + '</h1>';
                    html += '<h2 class="hero-subtitle">' + heroTexts.subtitle + '</h2>';
                    html += '<p class="hero-description">' + heroTexts.description + '</p>';
                    html += '<div class="hero-cta-group">';
                    html += '<a href="' + heroTexts.ctaLink + '" class="cta-button cta-ultra">' + heroTexts.ctaText + '</a>';
                    html += '<a href="' + heroTexts.ctaSecondaryLink + '" class="cta-button cta-button-outline">📞 ' + heroTexts.ctaSecondary + '</a>';
                    html += '</div>';
                    html += '</div>';
                    html += '</div>';
                    html += '</section>';
                    break;
                    
                case 'video':
                    var videoSrc = (config.uploads && config.uploads['hero-video']) ? config.uploads['hero-video'].blobUrl : '';
                    var fallbackImg = (config.uploads && config.uploads['hero-fallback']) ? config.uploads['hero-fallback'].blobUrl : '';
                    
                    html += '<section class="hero hero-video" id="accueil">';
                    if (videoSrc) {
                        html += '<video class="hero-video-bg" autoplay muted loop playsinline>';
                        html += '<source src="' + videoSrc + '" type="video/mp4">';
                        html += '</video>';
                    }
                    if (fallbackImg) {
                        html += '<div class="hero-video-fallback" style="background-image: url(' + fallbackImg + ');"></div>';
                    }
                    html += '<div class="hero-video-overlay"></div>';
                    html += '<div class="container">';
                    html += '<div class="hero-content">';
                    html += '<h1 class="hero-title hero-video-title">' + heroTexts.title + '</h1>';
                    html += '<h2 class="hero-subtitle">' + heroTexts.subtitle + '</h2>';
                    html += '<p class="hero-description">' + heroTexts.description + '</p>';
                    html += '<a href="' + heroTexts.ctaLink + '" class="cta-button cta-video">' + heroTexts.ctaText + '</a>';
                    html += '</div>';
                    html += '</div>';
                    html += '</section>';
                    break;
                    
                case 'split-diagonal':
                    var splitImage = (config.uploads && config.uploads['hero-split-bg']) ? 
                        'background-image: url(' + config.uploads['hero-split-bg'].blobUrl + '); background-size: cover; background-position: center;' : heroBgImage;
                    html += '<section class="hero hero-split-diagonal" id="accueil">';
                    html += '<div class="hero-split-bg" style="' + splitImage + '"></div>';
                    html += '<div class="hero-split-overlay"></div>';
                    html += '<div class="hero-split-content">';
                    html += '<div class="container">';
                    html += '<div class="hero-content">';
                    html += '<h1 class="hero-title hero-split-title">' + heroTexts.title + '</h1>';
                    html += '<h2 class="hero-subtitle">' + heroTexts.subtitle + '</h2>';
                    html += '<p class="hero-description">' + heroTexts.description + '</p>';
                    html += '<a href="' + heroTexts.ctaLink + '" class="cta-button cta-split">' + heroTexts.ctaText + '</a>';
                    html += '</div>';
                    html += '</div>';
                    html += '</div>';
                    html += '</section>';
                    break;
                    
                case 'floating-elements':
                    var floatingImage = (config.uploads && config.uploads['hero-floating-bg']) ? 
                        'background-image: url(' + config.uploads['hero-floating-bg'].blobUrl + '); background-size: cover; background-position: center;' : heroBgImage;
                    html += '<section class="hero hero-floating" id="accueil" style="' + floatingImage + '">';
                    html += '<div class="floating-elements">';
                    html += '<div class="floating-circle floating-1"></div>';
                    html += '<div class="floating-square floating-2"></div>';
                    html += '<div class="floating-triangle floating-3"></div>';
                    html += '<div class="floating-circle floating-4"></div>';
                    html += '</div>';
                    html += '<div class="container">';
                    html += '<div class="hero-content hero-floating-content">';
                    html += '<h1 class="hero-title hero-floating-title">' + heroTexts.title + '</h1>';
                    html += '<h2 class="hero-subtitle">' + heroTexts.subtitle + '</h2>';
                    html += '<p class="hero-description">' + heroTexts.description + '</p>';
                    html += '<a href="' + heroTexts.ctaLink + '" class="cta-button cta-floating">' + heroTexts.ctaText + '</a>';
                    html += '</div>';
                    html += '</div>';
                    html += '</section>';
                    break;
                    
                case 'magazine':
                    var magazineImage = (config.uploads && config.uploads['hero-magazine-img']) ? 
                        'background-image: url(' + config.uploads['hero-magazine-img'].blobUrl + '); background-size: cover; background-position: center;' : heroBgImage;
                    html += '<section class="hero hero-magazine" id="accueil">';
                    html += '<div class="magazine-grid">';
                    html += '<div class="magazine-image" style="' + magazineImage + '"></div>';
                    html += '<div class="magazine-content">';
                    html += '<div class="magazine-header">';
                    html += '<span class="magazine-category">' + heroTexts.category + '</span>';
                    html += '<span class="magazine-date">ÉDITION 2025</span>';
                    html += '</div>';
                    html += '<h1 class="hero-title magazine-title">' + heroTexts.title + '</h1>';
                    html += '<h2 class="magazine-subtitle">' + heroTexts.subtitle + '</h2>';
                    html += '<p class="magazine-excerpt">' + heroTexts.description + '</p>';
                    html += '<div class="magazine-meta">';
                    html += '<span>Par ' + heroTexts.author + '</span>';
                    html += '<span>' + heroTexts.readTime + '</span>';
                    html += '</div>';
                    html += '<a href="' + heroTexts.ctaLink + '" class="cta-button cta-magazine">' + heroTexts.ctaText + '</a>';
                    html += '</div>';
                    html += '</div>';
                    html += '</section>';
                    break;
                    
                case 'interactive-stats':
                    var statsImage = (config.uploads && config.uploads['hero-stats-bg']) ? 
                        'background-image: url(' + config.uploads['hero-stats-bg'].blobUrl + '); background-size: cover; background-position: center;' : heroBgImage;
                    html += '<section class="hero hero-stats" id="accueil" style="' + statsImage + '">';
                    html += '<div class="stats-overlay"></div>';
                    html += '<div class="container">';
                    html += '<div class="hero-stats-layout">';
                    html += '<div class="hero-content">';
                    html += '<h1 class="hero-title stats-title">' + heroTexts.title + '</h1>';
                    html += '<h2 class="hero-subtitle">' + heroTexts.subtitle + '</h2>';
                    html += '<p class="hero-description">' + heroTexts.description + '</p>';
                    html += '</div>';
                    html += '<div class="hero-stats-grid">';
                    // Parsing des statistiques
                    var stats = [heroTexts.stat1, heroTexts.stat2, heroTexts.stat3, heroTexts.stat4];
                    for (var i = 0; i < stats.length; i++) {
                        var statParts = stats[i].split(' ');
                        var statNumber = statParts[0] || '';
                        var statLabel = statParts.slice(1).join(' ') || '';
                        html += '<div class="stat-card"><div class="stat-number">' + statNumber + '</div><div class="stat-label">' + statLabel + '</div></div>';
                    }
                    html += '</div>';
                    html += '</div>';
                    html += '</div>';
                    html += '</section>';
                    break;
                    
                case 'corporate-clean':
                    html += '<section class="hero hero-corporate" id="accueil">';
                    html += '<div class="corporate-bg">';
                    var corporateImage = (config.uploads && config.uploads['hero-corporate-img']) ? 
                        'background-image: url(' + config.uploads['hero-corporate-img'].blobUrl + '); background-size: cover; background-position: center;' : heroBgImage;
                    if (corporateImage) {
                        html += '<div class="corporate-image" style="' + corporateImage + '"></div>';
                    }
                    html += '<div class="corporate-overlay"></div>';
                    html += '</div>';
                    html += '<div class="container">';
                    html += '<div class="corporate-content">';
                    html += '<div class="corporate-badge">' + heroTexts.badge + '</div>';
                    html += '<h1 class="hero-title corporate-title">' + heroTexts.title + '</h1>';
                    html += '<h2 class="corporate-subtitle">' + heroTexts.subtitle + '</h2>';
                    html += '<p class="corporate-description">' + heroTexts.description + '</p>';
                    html += '<div class="corporate-features">';
                    var features = heroTexts.features.split('&#10;');
                    for (var i = 0; i < features.length; i++) {
                        html += '<div class="feature-item">' + features[i] + '</div>';
                    }
                    html += '</div>';
                    html += '<a href="' + heroTexts.ctaLink + '" class="cta-button cta-corporate">' + heroTexts.ctaText + '</a>';
                    html += '</div>';
                    html += '</div>';
                    html += '</section>';
                    break;
                    
                case 'parallax-layers':
                    var parallaxImage = (config.uploads && config.uploads['hero-parallax-bg']) ? 
                        'background-image: url(' + config.uploads['hero-parallax-bg'].blobUrl + '); background-size: cover; background-position: center;' : heroBgImage;
                    html += '<section class="hero hero-parallax" id="accueil">';
                    html += '<div class="parallax-layer parallax-bg" style="' + parallaxImage + '"></div>';
                    html += '<div class="parallax-layer parallax-overlay-1"></div>';
                    html += '<div class="parallax-layer parallax-overlay-2"></div>';
                    html += '<div class="parallax-content">';
                    html += '<div class="container">';
                    html += '<div class="hero-content">';
                    html += '<h1 class="hero-title parallax-title">' + heroTexts.title + '</h1>';
                    html += '<h2 class="hero-subtitle">' + heroTexts.subtitle + '</h2>';
                    html += '<p class="hero-description">' + heroTexts.description + '</p>';
                    html += '<a href="' + heroTexts.ctaLink + '" class="cta-button cta-parallax">' + heroTexts.ctaText + '</a>';
                    html += '</div>';
                    html += '</div>';
                    html += '</div>';
                    html += '</section>';
                    break;
                    
                case 'centered-minimal':
                    html += '<section class="hero hero-minimal" id="accueil">';
                    var minimalImage = (config.uploads && config.uploads['hero-minimal-bg']) ? 
                        'background-image: url(' + config.uploads['hero-minimal-bg'].blobUrl + '); background-size: cover; background-position: center;' : heroBgImage;
                    if (minimalImage) {
                        html += '<div class="minimal-bg" style="' + minimalImage + '"></div>';
                    }
                    html += '<div class="minimal-overlay"></div>';
                    html += '<div class="minimal-content">';
                    html += '<div class="minimal-container">';
                    html += '<h1 class="hero-title minimal-title">' + heroTexts.title + '</h1>';
                    html += '<div class="minimal-line"></div>';
                    html += '<h2 class="minimal-subtitle">' + heroTexts.subtitle + '</h2>';
                    html += '<p class="minimal-description">' + heroTexts.description + '</p>';
                    html += '<a href="' + heroTexts.ctaLink + '" class="cta-button cta-minimal">' + heroTexts.ctaText + '</a>';
                    html += '</div>';
                    html += '</div>';
                    html += '</section>';
                    break;
                    
                case 'cards-layout':
                    var cardsImage = (config.uploads && config.uploads['hero-cards-bg']) ? 
                        'background-image: url(' + config.uploads['hero-cards-bg'].blobUrl + '); background-size: cover; background-position: center;' : heroBgImage;
                    html += '<section class="hero hero-cards" id="accueil" style="' + cardsImage + '">';
                    html += '<div class="cards-overlay"></div>';
                    html += '<div class="container">';
                    html += '<div class="hero-cards-layout">';
                    html += '<div class="cards-header">';
                    html += '<h1 class="hero-title cards-title">' + heroTexts.title + '</h1>';
                    html += '<h2 class="hero-subtitle">' + heroTexts.subtitle + '</h2>';
                    html += '<p class="hero-description">' + heroTexts.description + '</p>';
                    html += '</div>';
                    html += '<div class="hero-cards-grid">';
                    html += '<div class="hero-card"><div class="card-icon">⚡</div><div class="card-title">' + heroTexts.card1Title + '</div><div class="card-desc">' + heroTexts.card1Desc + '</div></div>';
                    html += '<div class="hero-card"><div class="card-icon">🔧</div><div class="card-title">' + heroTexts.card2Title + '</div><div class="card-desc">' + heroTexts.card2Desc + '</div></div>';
                    html += '<div class="hero-card"><div class="card-icon">🏠</div><div class="card-title">' + heroTexts.card3Title + '</div><div class="card-desc">' + heroTexts.card3Desc + '</div></div>';
                    html += '</div>';
                    html += '<a href="' + heroTexts.ctaLink + '" class="cta-button cta-cards">' + heroTexts.ctaText + '</a>';
                    html += '</div>';
                    html += '</div>';
                    html += '</section>';
                    break;
                    
                default:
                    // Hero standard
                    html += '<section class="hero" id="accueil" style="' + heroBgImage + '">';
                    html += '<div class="container">';
                    html += '<div class="hero-content">';
                    html += '<h1 class="hero-title">' + heroTitle + '</h1>';
                    html += '<h2 class="hero-subtitle">Votre ' + config.company.trade + ' expert à ' + config.company.city + '</h2>';
                    html += '<p class="hero-description">' + config.seo.description + '</p>';
                    html += '<a href="#services" class="cta-button">Nos Services</a>';
                    html += '<a href="tel:' + config.company.phone + '" class="cta-button cta-button-outline">Appeler</a>';
                    html += '</div>';
                    html += '</div>';
                    html += '</section>';
            }
            
            // Services blocks avec variants
            var servicesTexts = {
                title: document.getElementById('servicesTitle') ? document.getElementById('servicesTitle').value : 'Nos Services',
                subtitle: document.getElementById('servicesSubtitle') ? document.getElementById('servicesSubtitle').value : 'Des solutions professionnelles adaptées à vos besoins',
                services: config.company.servicesAdvanced || config.company.services
            };
            
            switch (servicesVariant) {
                case 'ultra-pro':
                    html += '<section class="services services-ultra-pro" id="services">';
                    html += '<div class="services-particles">';
                    for (var p = 0; p < 8; p++) {
                        html += '<div class="particle particle-' + (p + 1) + '"></div>';
                    }
                    html += '</div>';
                    html += '<div class="container">';
                    html += '<div class="services-header">';
                    html += '<h2 class="section-title services-ultra-title">' + servicesTexts.title + '</h2>';
                    html += '<p class="services-subtitle">' + servicesTexts.subtitle + '</p>';
                    html += '</div>';
                    html += '<div class="services-ultra-grid">';
                    
                    for (var i = 0; i < servicesTexts.services.length; i++) {
                        var service = servicesTexts.services[i];
                        var isAdvanced = service && typeof service === 'object';
                        
                        if (service) {
                            var serviceTitle = isAdvanced ? service.title : service;
                            var serviceDesc = isAdvanced ? service.description : 'Service professionnel avec garantie décennale et intervention rapide.';
                            var serviceIcon = isAdvanced ? service.icon : (['⚡', '🔧', '🏠', '💡', '⚙️', '🛠️', '📱', '🌟'][i] || '⚙️');
                            var servicePrice = isAdvanced ? service.price : '85€';
                            var servicePriceLabel = isAdvanced ? service.priceLabel : 'À partir de';
                            var serviceColor = isAdvanced ? service.color : config.design.color;
                            var serviceFeatures = isAdvanced ? service.features : ['Garantie 10 ans', 'Devis gratuit', 'Dépannage 24h/7j'];
                            
                            if (serviceTitle && serviceTitle.trim()) {
                                var iconStyle = document.getElementById('servicesIconStyle') ? document.getElementById('servicesIconStyle').value : 'Gradient + Glow';
                                
                                html += '<div class="service-ultra-card" data-aos="fade-up" data-aos-delay="' + (i * 100) + '">';
                                html += '<div class="service-ultra-icon">';
                                
                                if (iconStyle !== 'Sans fond rond') {
                                    html += '<div class="icon-bg" style="background: linear-gradient(45deg, ' + serviceColor + ', ' + serviceColor + '88);"></div>';
                                }
                                
                                html += '<span class="icon-emoji" style="' + (iconStyle === 'Sans fond rond' ? 'font-size: 3rem; margin-bottom: 1rem;' : '') + '">' + serviceIcon + '</span>';
                                html += '</div>';
                                html += '<h3 class="service-ultra-title">' + serviceTitle + '</h3>';
                                html += '<p class="service-ultra-desc">' + serviceDesc + '</p>';
                                html += '<div class="service-ultra-features">';
                                
                                if (isAdvanced && serviceFeatures) {
                                    for (var f = 0; f < Math.min(serviceFeatures.length, 4); f++) {
                                        html += '<span class="feature">✓ ' + serviceFeatures[f] + '</span>';
                                    }
                                } else {
                                    html += '<span class="feature">✓ Garantie 10 ans</span>';
                                    html += '<span class="feature">✓ Devis gratuit</span>';
                                    html += '<span class="feature">✓ Dépannage 24h/7j</span>';
                                }
                                
                                html += '</div>';
                                html += '<div class="service-ultra-price">' + servicePriceLabel + ' <strong>' + servicePrice + '</strong></div>';
                                html += '<button class="service-ultra-btn" style="background: linear-gradient(45deg, ' + serviceColor + ', ' + serviceColor + '88);">Demander un devis</button>';
                                html += '</div>';
                            }
                        }
                    }
                    html += '</div>';
                    html += '</div>';
                    html += '</section>';
                    break;
                    
                case 'carousel-advanced':
                    html += '<section class="services services-carousel" id="services">';
                    html += '<div class="container">';
                    html += '<div class="services-header">';
                    html += '<h2 class="section-title">' + servicesTexts.title + '</h2>';
                    html += '<p class="services-subtitle">' + servicesTexts.subtitle + '</p>';
                    html += '</div>';
                    html += '<div class="services-carousel-container">';
                    html += '<div class="services-carousel-navigation">';
                    html += '<button class="carousel-btn carousel-prev">❮</button>';
                    html += '<button class="carousel-btn carousel-next">❯</button>';
                    html += '</div>';
                    html += '<div class="services-carousel-wrapper">';
                    html += '<div class="services-carousel-track">';
                    
                    for (var i = 0; i < servicesTexts.services.length; i++) {
                        var service = servicesTexts.services[i];
                        var isAdvanced = service && typeof service === 'object';
                        
                        if (service) {
                            var serviceTitle = isAdvanced ? service.title : service;
                            var serviceDesc = isAdvanced ? service.description : 'Solutions professionnelles avec matériel de qualité et main-d\'œuvre experte.';
                            var serviceIcon = isAdvanced ? service.icon : (['⚡', '🔧', '🏠', '💡', '⚙️', '🛠️', '📱', '🌟'][i] || '⚙️');
                            var servicePrice = isAdvanced ? service.price : '85€';
                            var servicePriceLabel = isAdvanced ? service.priceLabel : 'Dès';
                            var serviceColor = isAdvanced ? service.color : config.design.color;
                            var serviceFeatures = isAdvanced ? service.features : ['Intervention sous 2h', 'Matériel certifié CE', 'Garantie constructeur', 'Suivi post-intervention'];
                            
                            if (serviceTitle && serviceTitle.trim()) {
                                html += '<div class="service-carousel-card">';
                                html += '<div class="service-carousel-header">';
                                html += '<div class="service-carousel-icon">' + serviceIcon + '</div>';
                                html += '<div class="service-carousel-badge" style="background: linear-gradient(45deg, ' + serviceColor + ', ' + serviceColor + '88);">Pro</div>';
                                html += '</div>';
                                html += '<h3 class="service-carousel-title">' + serviceTitle + '</h3>';
                                html += '<p class="service-carousel-desc">' + serviceDesc + '</p>';
                                html += '<ul class="service-carousel-list">';
                                
                                if (isAdvanced && serviceFeatures) {
                                    for (var f = 0; f < Math.min(serviceFeatures.length, 4); f++) {
                                        html += '<li>✓ ' + serviceFeatures[f] + '</li>';
                                    }
                                } else {
                                    html += '<li>✓ Intervention sous 2h</li>';
                                    html += '<li>✓ Matériel certifié CE</li>';
                                    html += '<li>✓ Garantie constructeur</li>';
                                    html += '<li>✓ Suivi post-intervention</li>';
                                }
                                
                                html += '</ul>';
                                html += '<div class="service-carousel-footer">';
                                html += '<div class="service-carousel-price">' + servicePriceLabel + ' <span>' + servicePrice + '</span></div>';
                                html += '<button class="service-carousel-btn" style="background: ' + serviceColor + ';">Réserver</button>';
                                html += '</div>';
                                html += '</div>';
                            }
                        }
                    }
                    html += '</div>';
                    html += '</div>';
                    html += '<div class="carousel-indicators">';
                    for (var i = 0; i < Math.min(servicesTexts.services.length, 6); i++) {
                        html += '<div class="carousel-indicator' + (i === 0 ? ' active' : '') + '"></div>';
                    }
                    html += '</div>';
                    html += '</div>';
                    html += '</div>';
                    html += '</section>';
                    break;
                    
                case 'masonry':
                    html += '<section class="services services-masonry" id="services">';
                    html += '<div class="container">';
                    html += '<div class="services-header">';
                    html += '<h2 class="section-title">' + servicesTexts.title + '</h2>';
                    html += '<p class="services-subtitle">' + servicesTexts.subtitle + '</p>';
                    html += '</div>';
                    html += '<div class="services-filters">';
                    html += '<button class="filter-btn active" data-filter="all">Tous</button>';
                    html += '<button class="filter-btn" data-filter="installation">Installation</button>';
                    html += '<button class="filter-btn" data-filter="depannage">Dépannage</button>';
                    html += '<button class="filter-btn" data-filter="renovation">Rénovation</button>';
                    html += '</div>';
                    html += '<div class="services-masonry-grid">';
                    
                    var masonryCategories = ['installation', 'depannage', 'renovation', 'installation', 'depannage', 'renovation'];
                    var masonryHeights = ['tall', 'normal', 'short', 'normal', 'tall', 'short'];
                    
                    for (var i = 0; i < servicesTexts.services.length; i++) {
                        var service = servicesTexts.services[i];
                        var isAdvanced = service && typeof service === 'object';
                        
                        if (service) {
                            var serviceTitle = isAdvanced ? service.title : service;
                            var serviceDesc = isAdvanced ? service.description : 'Expertise technique et matériel professionnel pour tous vos projets.';
                            var serviceIcon = isAdvanced ? service.icon : (['⚡', '🔧', '🏠', '💡', '⚙️', '🛠️', '📱', '🌟'][i] || '⚙️');
                            var servicePrice = isAdvanced ? service.price : '85€';
                            var servicePriceLabel = isAdvanced ? service.priceLabel : 'À partir de';
                            var serviceColor = isAdvanced ? service.color : config.design.color;
                            var serviceFeatures = isAdvanced ? service.features : ['Garantie', 'Certifié'];
                            
                            if (serviceTitle && serviceTitle.trim()) {
                                html += '<div class="service-masonry-item ' + (masonryHeights[i] || 'normal') + '" data-category="' + (masonryCategories[i] || 'installation') + '">';
                                html += '<div class="masonry-item-bg" style="background: linear-gradient(45deg, ' + serviceColor + ', ' + serviceColor + '88);"></div>';
                                html += '<div class="masonry-item-overlay"></div>';
                                html += '<div class="masonry-item-content">';
                                html += '<div class="masonry-item-icon">' + serviceIcon + '</div>';
                                html += '<h3 class="masonry-item-title">' + serviceTitle + '</h3>';
                                html += '<p class="masonry-item-desc">' + serviceDesc + '</p>';
                                html += '<div class="masonry-item-tags">';
                                
                                if (isAdvanced && serviceFeatures) {
                                    for (var f = 0; f < Math.min(serviceFeatures.length, 3); f++) {
                                        html += '<span class="tag">' + serviceFeatures[f] + '</span>';
                                    }
                                } else {
                                    html += '<span class="tag">Garantie</span>';
                                    html += '<span class="tag">Certifié</span>';
                                }
                                
                                html += '</div>';
                                html += '<div class="masonry-item-price">' + servicePriceLabel + ' ' + servicePrice + '</div>';
                                html += '</div>';
                                html += '<div class="masonry-item-hover">';
                                html += '<button class="masonry-btn" style="color: ' + serviceColor + ';">Découvrir</button>';
                                html += '</div>';
                                html += '</div>';
                            }
                        }
                    }
                    html += '</div>';
                    html += '</div>';
                    html += '</section>';
                    break;
                    
                case 'tabs-interactive':
                    html += '<section class="services services-tabs" id="services">';
                    html += '<div class="container">';
                    html += '<div class="services-header">';
                    html += '<h2 class="section-title">' + servicesTexts.title + '</h2>';
                    html += '<p class="services-subtitle">' + servicesTexts.subtitle + '</p>';
                    html += '</div>';
                    html += '<div class="services-tabs-container">';
                    html += '<div class="services-tabs-nav">';
                    
                    var tabCategories = [
                        {id: 'installation', name: 'Installation', icon: '⚡'},
                        {id: 'depannage', name: 'Dépannage', icon: '🔧'},
                        {id: 'renovation', name: 'Rénovation', icon: '🏠'},
                        {id: 'maintenance', name: 'Maintenance', icon: '⚙️'}
                    ];
                    
                    for (var t = 0; t < tabCategories.length; t++) {
                        var tab = tabCategories[t];
                        html += '<button class="tab-btn' + (t === 0 ? ' active' : '') + '" data-tab="' + tab.id + '">';
                        html += '<span class="tab-icon">' + tab.icon + '</span>';
                        html += '<span class="tab-name">' + tab.name + '</span>';
                        html += '</button>';
                    }
                    html += '</div>';
                    html += '<div class="services-tabs-content">';
                    
                    for (var t = 0; t < tabCategories.length; t++) {
                        var tab = tabCategories[t];
                        html += '<div class="tab-panel' + (t === 0 ? ' active' : '') + '" data-panel="' + tab.id + '">';
                        html += '<div class="tab-panel-grid">';
                        
                        // Afficher les services correspondants
                        var tabServices = servicesTexts.services.slice(t * 2, (t * 2) + 2);
                        for (var s = 0; s < tabServices.length; s++) {
                            var service = tabServices[s];
                            var isAdvanced = service && typeof service === 'object';
                            
                            if (service) {
                                var serviceTitle = isAdvanced ? service.title : service;
                                var serviceDesc = isAdvanced ? service.description : 'Service professionnel avec matériel de qualité.';
                                var servicePrice = isAdvanced ? service.price : '85€';
                                var servicePriceLabel = isAdvanced ? service.priceLabel : 'Dès';
                                var serviceColor = isAdvanced ? service.color : config.design.color;
                                var serviceFeatures = isAdvanced ? service.features : ['Devis gratuit', 'Intervention rapide', 'Garantie décennale'];
                                
                                if (serviceTitle && serviceTitle.trim()) {
                                    html += '<div class="tab-service-card">';
                                    html += '<div class="tab-service-icon">' + tab.icon + '</div>';
                                    html += '<h4 class="tab-service-title">' + serviceTitle + '</h4>';
                                    html += '<p class="tab-service-desc">' + serviceDesc + '</p>';
                                    html += '<div class="tab-service-features">';
                                    
                                    if (isAdvanced && serviceFeatures) {
                                        for (var f = 0; f < Math.min(serviceFeatures.length, 3); f++) {
                                            html += '<span>✓ ' + serviceFeatures[f] + '</span>';
                                        }
                                    } else {
                                        html += '<span>✓ Devis gratuit</span>';
                                        html += '<span>✓ Intervention rapide</span>';
                                        html += '<span>✓ Garantie décennale</span>';
                                    }
                                    
                                    html += '</div>';
                                    html += '<div class="tab-service-price">' + servicePriceLabel + ' ' + servicePrice + '</div>';
                                    html += '<button class="tab-service-btn" style="background: ' + serviceColor + ';">Commander</button>';
                                    html += '</div>';
                                }
                            }
                        }
                        html += '</div>';
                        html += '</div>';
                    }
                    html += '</div>';
                    html += '</div>';
                    html += '</div>';
                    html += '</section>';
                    break;
                    
                case 'timeline-process':
                    html += '<section class="services services-timeline" id="services">';
                    html += '<div class="container">';
                    html += '<div class="services-header">';
                    html += '<h2 class="section-title">' + servicesTexts.title + '</h2>';
                    html += '<p class="services-subtitle">Notre processus d\'intervention en 4 étapes</p>';
                    html += '</div>';
                    html += '<div class="services-timeline-container">';
                    html += '<div class="timeline-line"></div>';
                    
                    var timelineSteps = [
                        {step: '01', title: 'Diagnostic', desc: 'Évaluation complète de vos besoins', icon: '🔍'},
                        {step: '02', title: 'Devis', desc: 'Proposition détaillée et transparente', icon: '📋'},
                        {step: '03', title: 'Intervention', desc: 'Réalisation par nos experts', icon: '⚡'},
                        {step: '04', title: 'Suivi', desc: 'Garantie et maintenance', icon: '✅'}
                    ];
                    
                    for (var i = 0; i < timelineSteps.length; i++) {
                        var step = timelineSteps[i];
                        html += '<div class="timeline-item" data-aos="fade-up" data-aos-delay="' + (i * 200) + '">';
                        html += '<div class="timeline-marker">';
                        html += '<div class="timeline-number">' + step.step + '</div>';
                        html += '<div class="timeline-icon">' + step.icon + '</div>';
                        html += '</div>';
                        html += '<div class="timeline-content">';
                        html += '<h3 class="timeline-title">' + step.title + '</h3>';
                        html += '<p class="timeline-desc">' + step.desc + '</p>';
                        html += '<div class="timeline-services">';
                        
                        // Afficher 2 services par étape
                        var stepServices = servicesTexts.services.slice(i * 2, (i * 2) + 2);
                        for (var s = 0; s < stepServices.length; s++) {
                            var service = stepServices[s];
                            var isAdvanced = service && typeof service === 'object';
                            
                            if (service) {
                                var serviceTitle = isAdvanced ? service.title : service;
                                var servicePrice = isAdvanced ? service.price : '85€';
                                var servicePriceLabel = isAdvanced ? service.priceLabel : 'Dès';
                                var serviceColor = isAdvanced ? service.color : config.design.color;
                                
                                if (serviceTitle && serviceTitle.trim()) {
                                    html += '<div class="timeline-service">';
                                    html += '<span class="timeline-service-name">' + serviceTitle + '</span>';
                                    html += '<span class="timeline-service-price" style="color: ' + serviceColor + ';">' + servicePriceLabel + ' ' + servicePrice + '</span>';
                                    html += '</div>';
                                }
                            }
                        }
                        html += '</div>';
                        html += '</div>';
                        html += '</div>';
                    }
                    html += '</div>';
                    html += '</div>';
                    html += '</section>';
                    break;
                    
                case 'comparison-table':
                    html += '<section class="services services-comparison" id="services">';
                    html += '<div class="container">';
                    html += '<div class="services-header">';
                    html += '<h2 class="section-title">' + servicesTexts.title + '</h2>';
                    html += '<p class="services-subtitle">Comparez nos formules</p>';
                    html += '</div>';
                    html += '<div class="comparison-table-container">';
                    html += '<div class="comparison-table">';
                    html += '<div class="comparison-header">';
                    html += '<div class="comparison-cell comparison-feature-header">Services</div>';
                    html += '<div class="comparison-cell comparison-plan-header">Essentiel</div>';
                    html += '<div class="comparison-cell comparison-plan-header recommended">Premium</div>';
                    html += '<div class="comparison-cell comparison-plan-header">Pro</div>';
                    html += '</div>';
                    
                    var comparisonFeatures = [
                        {name: 'Diagnostic', essential: '✓', premium: '✓', pro: '✓'},
                        {name: 'Devis gratuit', essential: '✓', premium: '✓', pro: '✓'},
                        {name: 'Garantie', essential: '2 ans', premium: '5 ans', pro: '10 ans'},
                        {name: 'Dépannage 24h/7j', essential: '❌', premium: '✓', pro: '✓'},
                        {name: 'Maintenance', essential: '❌', premium: '❌', pro: '✓'},
                        {name: 'Matériel premium', essential: '❌', premium: '✓', pro: '✓'}
                    ];
                    
                    for (var i = 0; i < comparisonFeatures.length; i++) {
                        var feature = comparisonFeatures[i];
                        html += '<div class="comparison-row">';
                        html += '<div class="comparison-cell comparison-feature">' + feature.name + '</div>';
                        html += '<div class="comparison-cell">' + feature.essential + '</div>';
                        html += '<div class="comparison-cell">' + feature.premium + '</div>';
                        html += '<div class="comparison-cell">' + feature.pro + '</div>';
                        html += '</div>';
                    }
                    
                    html += '<div class="comparison-footer">';
                    html += '<div class="comparison-cell"></div>';
                    html += '<div class="comparison-cell"><div class="comparison-price">Dès 85€</div><button class="comparison-btn">Choisir</button></div>';
                    html += '<div class="comparison-cell"><div class="comparison-price">Dès 150€</div><button class="comparison-btn recommended">Choisir</button></div>';
                    html += '<div class="comparison-cell"><div class="comparison-price">Dès 250€</div><button class="comparison-btn">Choisir</button></div>';
                    html += '</div>';
                    html += '</div>';
                    html += '</div>';
                    html += '</div>';
                    html += '</section>';
                    break;
                    
                case 'hexagon-grid':
                    html += '<section class="services services-hexagon" id="services">';
                    html += '<div class="container">';
                    html += '<div class="services-header">';
                    html += '<h2 class="section-title">' + servicesTexts.title + '</h2>';
                    html += '<p class="services-subtitle">' + servicesTexts.subtitle + '</p>';
                    html += '</div>';
                    html += '<div class="services-hexagon-container">';
                    html += '<div class="hexagon-grid">';
                    
                    for (var i = 0; i < Math.min(servicesTexts.services.length, 7); i++) {
                        var service = servicesTexts.services[i];
                        var isAdvanced = service && typeof service === 'object';
                        
                        if (service) {
                            var serviceTitle = isAdvanced ? service.title : service;
                            var serviceDesc = isAdvanced ? service.description : 'Service professionnel garanti';
                            var serviceIcon = isAdvanced ? service.icon : (['⚡', '🔧', '🏠', '💡', '⚙️', '🛠️', '📱'][i] || '⚙️');
                            var servicePrice = isAdvanced ? service.price : '85€';
                            var serviceColor = isAdvanced ? service.color : config.design.color;
                            
                            if (serviceTitle && serviceTitle.trim()) {
                                html += '<div class="hexagon-item" data-aos="zoom-in" data-aos-delay="' + (i * 100) + '">';
                                html += '<div class="hexagon-shape">';
                                html += '<div class="hexagon-inner" style="background: linear-gradient(45deg, ' + serviceColor + ', ' + serviceColor + '88);">';
                                html += '<div class="hexagon-content">';
                                html += '<div class="hexagon-icon">' + serviceIcon + '</div>';
                                html += '<h3 class="hexagon-title">' + serviceTitle.substring(0, 12) + '</h3>';
                                html += '<p class="hexagon-price">' + servicePrice + '</p>';
                                html += '</div>';
                                html += '</div>';
                                html += '</div>';
                                html += '<div class="hexagon-info">';
                                html += '<h4>' + serviceTitle + '</h4>';
                                html += '<p>' + serviceDesc + '</p>';
                                html += '<button class="hexagon-btn" style="background: ' + serviceColor + ';">Réserver</button>';
                                html += '</div>';
                                html += '</div>';
                            }
                        }
                    }
                    html += '</div>';
                    html += '</div>';
                    html += '</div>';
                    html += '</section>';
                    break;
                    
                case 'accordion':
                    html += '<section class="services services-accordion" id="services">';
                    html += '<div class="container">';
                    html += '<div class="services-header">';
                    html += '<h2 class="section-title">' + servicesTexts.title + '</h2>';
                    html += '<p class="services-subtitle">' + servicesTexts.subtitle + '</p>';
                    html += '</div>';
                    html += '<div class="services-accordion-container">';
                    
                    for (var i = 0; i < servicesTexts.services.length; i++) {
                        var service = servicesTexts.services[i];
                        var isAdvanced = service && typeof service === 'object';
                        
                        if (service) {
                            var serviceTitle = isAdvanced ? service.title : service;
                            var serviceDesc = isAdvanced ? service.description : 'Service professionnel avec matériel de qualité et garantie décennale. Intervention rapide et devis gratuit.';
                            var serviceIcon = isAdvanced ? service.icon : (['⚡', '🔧', '🏠', '💡', '⚙️', '🛠️', '📱', '🌟'][i] || '⚙️');
                            var servicePrice = isAdvanced ? service.price : '85€';
                            var servicePriceLabel = isAdvanced ? service.priceLabel : 'Dès';
                            var serviceColor = isAdvanced ? service.color : config.design.color;
                            var serviceFeatures = isAdvanced ? service.features : ['Devis gratuit et sans engagement', 'Intervention sous 2h en urgence', 'Matériel certifié et garanti', 'Garantie décennale incluse', 'Suivi post-intervention'];
                            
                            if (serviceTitle && serviceTitle.trim()) {
                                html += '<div class="accordion-item' + (i === 0 ? ' active' : '') + '">';
                                html += '<div class="accordion-header" data-accordion="' + i + '">';
                                html += '<div class="accordion-header-left">';
                                html += '<div class="accordion-icon">' + serviceIcon + '</div>';
                                html += '<div class="accordion-title-group">';
                                html += '<h3 class="accordion-title">' + serviceTitle + '</h3>';
                                html += '<span class="accordion-subtitle">Service professionnel</span>';
                                html += '</div>';
                                html += '</div>';
                                html += '<div class="accordion-header-right">';
                                html += '<div class="accordion-price">' + servicePriceLabel + ' <strong>' + servicePrice + '</strong></div>';
                                html += '<div class="accordion-chevron">▼</div>';
                                html += '</div>';
                                html += '</div>';
                                html += '<div class="accordion-content">';
                                html += '<div class="accordion-content-inner">';
                                html += '<div class="accordion-content-left">';
                                html += '<p class="accordion-description">' + serviceDesc + '</p>';
                                html += '<ul class="accordion-features">';
                                
                                if (isAdvanced && serviceFeatures) {
                                    for (var f = 0; f < Math.min(serviceFeatures.length, 5); f++) {
                                        html += '<li>✓ ' + serviceFeatures[f] + '</li>';
                                    }
                                } else {
                                    html += '<li>✓ Devis gratuit et sans engagement</li>';
                                    html += '<li>✓ Intervention sous 2h en urgence</li>';
                                    html += '<li>✓ Matériel certifié et garanti</li>';
                                    html += '<li>✓ Garantie décennale incluse</li>';
                                    html += '<li>✓ Suivi post-intervention</li>';
                                }
                                
                                html += '</ul>';
                                html += '</div>';
                                html += '<div class="accordion-content-right">';
                                html += '<div class="accordion-cta">';
                                html += '<button class="accordion-btn primary" style="background: ' + serviceColor + ';">Demander un devis</button>';
                                html += '<button class="accordion-btn secondary" style="color: ' + serviceColor + '; border-color: ' + serviceColor + ';">Appeler maintenant</button>';
                                html += '</div>';
                                html += '</div>';
                                html += '</div>';
                                html += '</div>';
                                html += '</div>';
                            }
                        }
                    }
                    html += '</div>';
                    html += '</div>';
                    html += '</section>';
                    break;
                    
                default:
                    // Services standard (fallback)
                    html += '<section class="services" id="services">';
                    html += '<div class="container">';
                    html += '<h2 class="section-title">Nos Services</h2>';
                    html += '<div class="services-grid">';
                    
                    var icons = ['⚡', '🔧', '🏠', '💡', '⚙️', '🛠️'];
                    for (var i = 0; i < servicesTexts.services.length; i++) {
                        var service = servicesTexts.services[i];
                        if (service && service.trim()) {
                            html += '<div class="service-card">';
                            html += '<div class="service-icon">' + (icons[i] || '⚙️') + '</div>';
                            html += '<h3 class="service-title">' + service + '</h3>';
                            html += '<p class="service-desc">Service professionnel avec garantie décennale.</p>';
                            html += '<div class="service-price">À partir de 85€</div>';
                            html += '</div>';
                        }
                    }
                    
                    html += '</div>';
                    html += '</div>';
                    html += '</section>';
            }
            
            // Contact
            html += '<section class="contact" id="contact">';
            html += '<div class="container">';
            html += '<h2 class="contact-title">Contactez ' + config.company.name + '</h2>';
            html += '<div class="contact-split">';
            html += '<div class="contact-info">';
            html += '<div class="contact-form">';
            html += '<h3>Demandez un devis gratuit</h3>';
            html += '<form>';
            html += '<input type="text" placeholder="Votre nom" required>';
            html += '<input type="email" placeholder="Votre email" required>';
            html += '<input type="tel" placeholder="Votre téléphone" required>';
            html += '<select><option>Type de prestation</option><option>Installation</option><option>Dépannage</option><option>Rénovation</option></select>';
            html += '<textarea placeholder="Décrivez votre projet..." rows="4"></textarea>';
            html += '<button type="submit">Envoyer ma demande</button>';
            html += '</form>';
            html += '</div>';
            html += '<div class="contact-details">';
            html += '<div class="contact-item"><span class="contact-icon">📞</span><div><strong>Téléphone</strong><br>' + config.company.phone + '</div></div>';
            html += '<div class="contact-item"><span class="contact-icon">📧</span><div><strong>Email</strong><br>' + config.company.email + '</div></div>';
            html += '<div class="contact-item"><span class="contact-icon">📍</span><div><strong>Zone</strong><br>' + config.company.city + ' et 20km alentour</div></div>';
            html += '</div>';
            html += '</div>';
            html += '<div class="contact-map">';
            html += '<div id="map" style="width: 100%; height: 400px; border-radius: 15px; margin-top: 2rem;"></div>';
            html += '<script>';
            
            // Variables pour la configuration
            var companyCity = config.company.city || 'Paris';
            var companyName = config.company.name.replace(/['"]/g, '');
            var companyPhone = config.company.phone;
            var radiusKm = config.maps && config.maps.radius ? (config.maps.radius / 1000) : 20;
            var radiusMeters = radiusKm * 1000;
            var strokeColor = config.design.color;
            
            html += 'var mapConfig = {';
            html += '  city: "' + companyCity + '",';
            html += '  name: "' + companyName + '",';
            html += '  phone: "' + companyPhone + '",';
            html += '  radius: ' + radiusMeters + ',';
            html += '  color: "' + strokeColor + '"';
            html += '};';
            
            html += 'function initMap() {';
            html += '  var geocoder = new google.maps.Geocoder();';
            html += '  geocoder.geocode({"address": mapConfig.city + ", France"}, function(results, status) {';
            html += '    if (status === "OK") {';
            html += '      var location = results[0].geometry.location;';
            
            // Calcul du zoom automatique selon le rayon - très précis
            html += '      var radiusKm = mapConfig.radius / 1000;';
            html += '      var zoom = 10;';
            html += '      if (radiusKm <= 1) zoom = 16;';
            html += '      else if (radiusKm <= 3) zoom = 14;';
            html += '      else if (radiusKm <= 6) zoom = 13;';
            html += '      else if (radiusKm <= 10) zoom = 12;';
            html += '      else if (radiusKm <= 18) zoom = 11;';
            html += '      else if (radiusKm <= 28) zoom = 10;';
            html += '      else if (radiusKm <= 40) zoom = 9;';
            html += '      else zoom = 8;';
            
            html += '      var map = new google.maps.Map(document.getElementById("map"), {';
            html += '        zoom: zoom,';
            html += '        center: location';
            html += '      });';
            
            // Marker avec label lisible
            html += '      var marker = new google.maps.Marker({';
            html += '        position: location,';
            html += '        map: map,';
            html += '        title: mapConfig.name';
            html += '      });';
            
            // Zone d\'intervention
            html += '      var circle = new google.maps.Circle({';
            html += '        strokeColor: mapConfig.color,';
            html += '        strokeOpacity: 0.8,';
            html += '        strokeWeight: 3,';
            html += '        fillColor: mapConfig.color,';
            html += '        fillOpacity: 0.15,';
            html += '        map: map,';
            html += '        center: location,';
            html += '        radius: mapConfig.radius';
            html += '      });';
            
            // InfoWindow
            html += '      var infoWindow = new google.maps.InfoWindow({';
            html += '        content: "<div style=\'padding:15px;text-align:center;\'><h3>" + mapConfig.name + "</h3><p>Zone: " + (mapConfig.radius/1000) + "km</p><p>Tel: " + mapConfig.phone + "</p></div>"';
            html += '      });';
            
            html += '      marker.addListener("click", function() {';
            html += '        infoWindow.open(map, marker);';
            html += '      });';
            
            html += '    } else {';
            // Fallback Paris si géocodage échoue
            html += '      var defaultLocation = {lat: 48.8566, lng: 2.3522};';
            html += '      var radiusKm = mapConfig.radius / 1000;';
            html += '      var zoom = 10;';
            html += '      if (radiusKm <= 1) zoom = 16;';
            html += '      else if (radiusKm <= 3) zoom = 14;';
            html += '      else if (radiusKm <= 6) zoom = 13;';
            html += '      else if (radiusKm <= 10) zoom = 12;';
            html += '      else if (radiusKm <= 18) zoom = 11;';
            html += '      else if (radiusKm <= 28) zoom = 10;';
            html += '      else if (radiusKm <= 40) zoom = 9;';
            html += '      else zoom = 8;';
            html += '      var map = new google.maps.Map(document.getElementById("map"), {';
            html += '        zoom: zoom, center: defaultLocation';
            html += '      });';
            html += '      var marker = new google.maps.Marker({';
            html += '        position: defaultLocation,';
            html += '        map: map,';
            html += '        title: mapConfig.name';
            html += '      });';
            html += '      new google.maps.Circle({strokeColor: mapConfig.color, strokeOpacity: 0.8, strokeWeight: 3, fillColor: mapConfig.color, fillOpacity: 0.15, map: map, center: defaultLocation, radius: mapConfig.radius});';
            html += '    }';
            html += '  });';
            html += '}';
            
            html += '</' + 'script>';
            html += '</div>';
            html += '</div>';
            html += '</div>';
            html += '</section>';
            
            // Footer
            html += '<footer>';
            html += '<div class="container">';
            html += '<p>&copy; 2025 ' + config.company.name + ' - Site créé avec AWEMA Studio Pro v2.0</p>';
            html += '</div>';
            html += '</footer>';
            
            html += '</body>';
            html += '</html>';
            
            updateStatus('HTML généré avec succès !');
            return html;
        }

        // Functions
        function updateStatus(message) {
            var statusElement = document.getElementById('statusText');
            if (statusElement) {
                statusElement.textContent = message;
            }
            console.log('Status:', message);
        }

        function updatePreview() {
            updateStatus('Mise à jour preview...');
            console.log('🔄 updatePreview() appelée');
            
            var iframe = document.getElementById('preview');
            if (!iframe) {
                console.error('❌ Iframe preview non trouvée');
                updateStatus('Erreur: Iframe preview non trouvée');
                return;
            }
            
            try {
                // UTILISER LA VRAIE FONCTION generateHTML() 
                var fullHtml = generateHTML();
                console.log('✅ HTML complet généré:', fullHtml.length + ' caractères');
                
                // Utiliser srcdoc pour éviter les problèmes de blob
                iframe.srcdoc = fullHtml;
                
                console.log('✅ Preview complète appliquée via srcdoc');
                updateStatus('Preview complète chargée !');
                
            } catch (error) {
                console.error('❌ Erreur updatePreview:', error);
                updateStatus('Erreur preview: ' + error.message);
                
                // Fallback simple en cas d'erreur
                iframe.srcdoc = '<html><head><style>body{font-family:Arial;margin:0;background:linear-gradient(135deg,#3b82f6,#1e40af);color:white;padding:40px;text-align:center}h1{font-size:3rem;margin-bottom:20px}h2{font-size:1.5rem;margin-bottom:30px;opacity:0.9}p{font-size:1.2rem;margin:20px 0}.services{background:rgba(255,255,255,0.1);padding:20px;border-radius:15px;margin:30px 0}.footer{margin-top:40px;opacity:0.7;font-size:14px}</style></head><body><h1>🚀 ' + config.company.name + '</h1><h2>Votre ' + config.company.trade + ' expert à ' + config.company.city + '</h2><p>📞 ' + config.company.phone + '</p><p>📧 ' + config.company.email + '</p><div class="services"><h3>Nos Services</h3><p>' + config.company.services.join(' • ') + '</p></div><div class="footer">Site créé avec AWEMA Studio Pro v2.0 - Mode Fallback</div></body></html>';
            }
        }
        
        function updatePreviewFull() {
            updateStatus('Génération preview complète...');
            console.log('🔄 updatePreviewFull() appelée');
            
            var iframe = document.getElementById('preview');
            if (!iframe) {
                console.error('❌ Iframe preview non trouvée');
                return;
            }
            
            try {
                var html = generateHTML();
                console.log('✅ HTML complet généré:', html.length + ' caractères');
                
                var blob = new Blob([html], { type: 'text/html' });
                var url = URL.createObjectURL(blob);
                
                iframe.src = url;
                console.log('✅ URL blob assignée à iframe:', url);
                
                setTimeout(function() {
                    URL.revokeObjectURL(url);
                }, 5000);
                
                updateStatus('Preview complète chargée !');
            } catch (error) {
                console.error('❌ Erreur updatePreviewFull:', error);
                updateStatus('Erreur preview complète: ' + error.message);
            }
        }

        function generateProject() {
            updateStatus('Génération projet...');
            
            var html = generateHTML();
            var filename = config.company.name.toLowerCase().replace(/\s+/g, '-') + '-site-awema-v2.html';
            
            var blob = new Blob([html], { type: 'text/html' });
            var url = URL.createObjectURL(blob);
            
            var a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            URL.revokeObjectURL(url);
            
            updateStatus('Site généré: ' + filename);
            
            setTimeout(function() {
                alert('🚀 SITE GÉNÉRÉ AVEC SUCCÈS !\\n\\n' +
                      '✨ Design ' + config.blocks.hero.variant + ' appliqué\\n' +
                      '🎨 Couleur: ' + config.design.color + '\\n' +
                      '📱 100% responsive (Desktop/Tablet/Mobile)\\n' +
                      '⚡ Animations et transitions fluides\\n' +
                      '🔍 SEO optimisé pour ' + config.company.trade + '\\n' +
                      '🗺️ Google Maps intégré\\n\\n' +
                      'Fichier téléchargé: ' + filename + '\\n' +
                      'Votre site révolutionnaire est prêt !');
            }, 300);
        }

        function initSections() {
            console.log('🔧 initSections() appelée');
            var sectionHeaders = document.querySelectorAll('.section-header');
            console.log('📋 Sections trouvées:', sectionHeaders.length);
            
            sectionHeaders.forEach(function(header, index) {
                console.log('🔗 Ajout event listener section:', index, header.textContent);
                header.addEventListener('click', function() {
                    console.log('👆 Clic sur section:', this.textContent);
                    var content = this.nextElementSibling;
                    var chevron = this.querySelector('.chevron');
                    
                    if (content && content.classList.contains('active')) {
                        content.classList.remove('active');
                        this.classList.remove('active');
                        if (chevron) chevron.textContent = '▶';
                        console.log('📁 Section fermée');
                    } else {
                        if (content) content.classList.add('active');
                        this.classList.add('active');
                        if (chevron) chevron.textContent = '▼';
                        console.log('📂 Section ouverte');
                    }
                });
            });
        }

        function generatePalette() {
            var trade = document.getElementById('trade').value;
            var palette = palettes[trade] || palettes.electricien;
            var paletteContainer = document.getElementById('colorPalette');
            
            if (paletteContainer) {
                paletteContainer.innerHTML = '';
                palette.forEach(function(color) {
                    var colorDiv = document.createElement('div');
                    colorDiv.style.cssText = 'display: inline-block; width: 40px; height: 40px; background: ' + color.color + '; border-radius: 50%; margin: 5px; cursor: pointer; border: 3px solid transparent;';
                    colorDiv.title = color.name;
                    colorDiv.addEventListener('click', function() {
                        config.design.color = color.color;
                        updatePreview();
                        updateStatus('Couleur: ' + color.name);
                    });
                    paletteContainer.appendChild(colorDiv);
                });
            }
        }

        function syncForm() {
            var fields = ['companyName', 'trade', 'city', 'phone', 'email', 'services', 'seoTitle', 'seoDescription', 'googleMapsApiKey'];
            
            fields.forEach(function(fieldId) {
                var field = document.getElementById(fieldId);
                if (field) {
                    field.addEventListener('input', function() {
                        updateConfig();
                        syncHeroFieldsFromCompany();
                        updatePreview();
                    });
                }
            });
        }

        function updateConfig() {
            var companyName = document.getElementById('companyName');
            var trade = document.getElementById('trade');
            var city = document.getElementById('city');
            var phone = document.getElementById('phone');
            var email = document.getElementById('email');
            var services = document.getElementById('services');
            var seoTitle = document.getElementById('seoTitle');
            var seoDescription = document.getElementById('seoDescription');
            var googleMapsApiKey = document.getElementById('googleMapsApiKey');

            if (companyName) config.company.name = companyName.value;
            if (trade) config.company.trade = trade.value;
            if (city) config.company.city = city.value;
            if (phone) config.company.phone = phone.value;
            if (email) config.company.email = email.value;
            if (services) config.company.services = services.value.split(',').map(function(s) { return s.trim(); });
            if (seoTitle) config.seo.title = seoTitle.value;
            if (seoDescription) config.seo.description = seoDescription.value;
            if (googleMapsApiKey) config.api.googleMapsKey = googleMapsApiKey.value;
            
            if (trade && trade.value !== config.company.trade) {
                generatePalette();
            }
        }

        function syncHeroFieldsFromCompany() {
            // Synchroniser les champs Hero avec les infos de l'entreprise si vides ou par défaut
            var heroTitle = document.getElementById('heroTitle');
            var heroVideoTitle = document.getElementById('heroVideoTitle');
            var heroSplitTitle = document.getElementById('heroSplitTitle');
            
            if (heroTitle && (heroTitle.value === '' || heroTitle.value === 'ElectroMax Pro')) {
                heroTitle.value = config.company.name;
            }
            if (heroVideoTitle && (heroVideoTitle.value === '' || heroVideoTitle.value === '🎬 ElectroMax Pro')) {
                heroVideoTitle.value = '🎬 ' + config.company.name;
            }
            if (heroSplitTitle && (heroSplitTitle.value === '' || heroSplitTitle.value === '⚡ ElectroMax Pro')) {
                heroSplitTitle.value = '⚡ ' + config.company.name;
            }
            
            // Synchroniser les descriptions si elles contiennent du texte par défaut
            var heroDescription = document.getElementById('heroDescription');
            var heroVideoDescription = document.getElementById('heroVideoDescription');
            
            if (heroDescription && heroDescription.value.includes('Expert en installation électrique')) {
                heroDescription.value = config.seo.description;
            }
            if (heroVideoDescription && heroVideoDescription.value.includes('Une expérience immersive')) {
                heroVideoDescription.value = config.seo.description;
            }
        }

        function initDevices() {
            var deviceButtons = document.querySelectorAll('.btn-device');
            deviceButtons.forEach(function(btn) {
                btn.addEventListener('click', function() {
                    deviceButtons.forEach(function(b) {
                        b.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    var device = this.getAttribute('data-device');
                    config.device = device;
                    
                    var iframe = document.getElementById('preview');
                    if (iframe) {
                        if (device === 'mobile') {
                            iframe.style.width = '375px';
                            iframe.style.height = '667px';
                            iframe.style.margin = '0 auto';
                        } else if (device === 'tablet') {
                            iframe.style.width = '768px';
                            iframe.style.height = '1024px';
                            iframe.style.margin = '0 auto';
                        } else {
                            iframe.style.width = '100%';
                            iframe.style.height = '100%';
                            iframe.style.margin = '0';
                        }
                    }
                    
                    updateStatus('Device: ' + device);
                });
            });
        }

        function initBlocs() {
            console.log('🧩 initBlocs() appelée');
            var blocItems = document.querySelectorAll('.block-item');
            console.log('🔢 Blocs trouvés:', blocItems.length);
            
            blocItems.forEach(function(item, index) {
                var blockType = item.getAttribute('data-block');
                var variant = item.getAttribute('data-variant');
                console.log('🎯 Bloc', index + ':', blockType, '-', variant);
                
                item.addEventListener('click', function() {
                    console.log('👆 Clic sur bloc:', blockType, '-', variant);
                    
                    // Fermer tous les panneaux de configuration
                    document.querySelectorAll('.block-config-panel').forEach(function(panel) {
                        panel.classList.remove('active');
                    });
                    
                    var category = this.closest('.block-category');
                    if (category) {
                        category.querySelectorAll('.block-item').forEach(function(b) {
                            b.classList.remove('selected');
                        });
                    }
                    
                    this.classList.add('selected');
                    
                    // Ouvrir le panneau de configuration de ce bloc
                    var configPanel = this.querySelector('.block-config-panel');
                    if (configPanel) {
                        configPanel.classList.add('active');
                    }
                    
                    // S'assurer que la config bloc existe
                    if (!config.blocks[blockType]) {
                        config.blocks[blockType] = { type: blockType, variant: variant };
                    } else {
                        config.blocks[blockType].variant = variant;
                    }
                    
                    updateStatus('Bloc sélectionné: ' + blockType + ' - ' + variant);
                    console.log('🔄 Config mise à jour, relancement preview...');
                    updatePreview();
                });
            });
        }

        // Système d'upload d'images universel
        function initImageUpload() {
            var uploadZones = document.querySelectorAll('.image-upload-zone');
            console.log('📷 initImageUpload - Zones trouvées:', uploadZones.length);
            
            uploadZones.forEach(function(zone) {
                var target = zone.getAttribute('data-target');
                
                // Événements drag & drop
                zone.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    this.classList.add('dragover');
                });
                
                zone.addEventListener('dragleave', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    this.classList.remove('dragover');
                });
                
                zone.addEventListener('drop', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    this.classList.remove('dragover');
                    
                    var files = e.dataTransfer.files;
                    if (files.length > 0) {
                        handleFileUpload(files[0], target, this);
                    }
                });
                
                // Clic pour ouvrir le sélecteur
                zone.addEventListener('click', function() {
                    var input = document.createElement('input');
                    input.type = 'file';
                    input.accept = target.includes('video') ? 'video/*' : 'image/*';
                    input.style.display = 'none';
                    
                    input.onchange = function(e) {
                        if (e.target.files.length > 0) {
                            handleFileUpload(e.target.files[0], target, zone);
                        }
                    };
                    
                    document.body.appendChild(input);
                    input.click();
                    document.body.removeChild(input);
                });
            });
        }

        function handleFileUpload(file, target, zone) {
            console.log('📁 Upload fichier:', file.name, 'pour', target);
            
            // Vérifications
            var maxSize = target.includes('video') ? 50 * 1024 * 1024 : 5 * 1024 * 1024; // 50MB vidéo, 5MB image
            if (file.size > maxSize) {
                alert('Fichier trop volumineux ! Taille max: ' + (maxSize / 1024 / 1024) + 'MB');
                return;
            }
            
            // Créer un blob URL
            var blobUrl = URL.createObjectURL(file);
            
            // Mettre à jour l'interface
            updateUploadZone(zone, file, blobUrl, target);
            
            // Sauvegarder dans la config
            if (!config.uploads) config.uploads = {};
            config.uploads[target] = {
                file: file,
                blobUrl: blobUrl,
                name: file.name,
                type: file.type
            };
            
            // Mettre à jour le preview
            updatePreview();
            
            console.log('✅ Upload réussi:', target, config.uploads[target]);
        }

        function updateUploadZone(zone, file, blobUrl, target) {
            var isVideo = target.includes('video');
            var preview = isVideo ? 
                '<video src="' + blobUrl + '" style="max-width: 100%; max-height: 80px; border-radius: 4px;" controls></video>' :
                '<img src="' + blobUrl + '" class="image-preview" alt="Preview">';
            
            zone.innerHTML = 
                '<div style="text-align: center;">' +
                    preview +
                    '<div style="font-size: 11px; color: #10b981; margin-top: 5px;">✅ ' + file.name + '</div>' +
                    '<div class="image-controls">' +
                        '<button class="btn btn-small" onclick="changeImage(\'' + target + '\')">Changer</button>' +
                        '<button class="btn btn-small" onclick="removeImage(\'' + target + '\')">Supprimer</button>' +
                    '</div>' +
                '</div>';
        }

        function changeImage(target) {
            var input = document.createElement('input');
            input.type = 'file';
            input.accept = target.includes('video') ? 'video/*' : 'image/*';
            input.style.display = 'none';
            
            input.onchange = function(e) {
                if (e.target.files.length > 0) {
                    var zone = document.querySelector('[data-target="' + target + '"]');
                    handleFileUpload(e.target.files[0], target, zone);
                }
            };
            
            document.body.appendChild(input);
            input.click();
            document.body.removeChild(input);
        }

        function removeImage(target) {
            var zone = document.querySelector('[data-target="' + target + '"]');
            if (zone) {
                var isVideo = target.includes('video');
                zone.innerHTML = 
                    '<div class="upload-text">' +
                        '<strong>' + (isVideo ? '🎬 Glisser une vidéo ici' : '📷 Glisser une image ici') + '</strong><br>' +
                        '<small>ou cliquer pour parcourir</small>' +
                    '</div>';
            }
            
            // Supprimer de la config
            if (config.uploads && config.uploads[target]) {
                URL.revokeObjectURL(config.uploads[target].blobUrl);
                delete config.uploads[target];
            }
            
            updatePreview();
        }

        function initGoogleMaps() {
            var radiusSlider = document.getElementById('interventionRadius');
            var radiusValue = document.getElementById('radiusValue');
            var updateMapBtn = document.getElementById('updateMapZones');
            var mainAddress = document.getElementById('mainAddress');
            
            if (radiusSlider && radiusValue) {
                radiusSlider.addEventListener('input', function() {
                    radiusValue.textContent = this.value + 'km';
                    config.maps = config.maps || {};
                    config.maps.radius = parseInt(this.value) * 1000;
                });
            }
            
            if (updateMapBtn) {
                updateMapBtn.addEventListener('click', function() {
                    updateStatus('Mise à jour des zones Google Maps...');
                    var address = mainAddress ? mainAddress.value : config.company.city;
                    var radius = radiusSlider ? parseInt(radiusSlider.value) : 20;
                    
                    config.maps = {
                        address: address,
                        radius: radius * 1000,
                        zones: document.getElementById('specificZones') ? document.getElementById('specificZones').value : ''
                    };
                    
                    // Mettre à jour aussi la ville dans la config principale
                    config.company.city = address;
                    
                    updatePreview();
                    updateStatus('Zones Google Maps mises à jour !');
                });
            }
        }

        // ÉDITEUR AVANCÉ SERVICES
        var serviceIcons = ['⚡', '🔧', '🏠', '💡', '⚙️', '🛠️', '📱', '🌟', '🔥', '⭐', '💎', '🚀', '✨', '🎯', '💪', '🎨', '🎪', '⚗️', '🔮', '🎭', '🎸', '🎼', '🎪', '🎨'];
        
        function initAdvancedServicesEditor() {
            console.log('🎨 Initialisation Éditeur Avancé Services');
            
            // Initialiser avec les services existants ou créer des services par défaut
            if (!config.company.servicesAdvanced) {
                config.company.servicesAdvanced = config.company.services.map(function(service, index) {
                    return {
                        id: 'service_' + Date.now() + '_' + index,
                        title: service,
                        description: 'Service professionnel avec matériel de qualité et main-d\'œuvre experte.',
                        price: '85€',
                        priceLabel: 'À partir de',
                        icon: serviceIcons[index] || '⚙️',
                        color: config.design.color,
                        features: [
                            'Devis gratuit',
                            'Intervention rapide',
                            'Garantie décennale',
                            'Matériel certifié'
                        ]
                    };
                });
            }
            
            renderServicesEditor();
        }
        
        function renderServicesEditor() {
            var container = document.getElementById('servicesAdvancedEditor');
            if (!container) return;
            
            container.innerHTML = '';
            
            config.company.servicesAdvanced.forEach(function(service, index) {
                var serviceDiv = document.createElement('div');
                serviceDiv.className = 'service-editor-item';
                serviceDiv.setAttribute('data-service-id', service.id);
                
                serviceDiv.innerHTML = 
                    '<div class="service-editor-header">' +
                        '<div class="service-editor-title">' +
                            '<span class="service-drag-handle">⋮⋮</span>' +
                            'Service ' + (index + 1) + ': ' + service.title +
                        '</div>' +
                        '<div class="service-editor-controls">' +
                            '<button class="service-editor-btn" onclick="moveServiceUp(\'' + service.id + '\')">↑</button>' +
                            '<button class="service-editor-btn" onclick="moveServiceDown(\'' + service.id + '\')">↓</button>' +
                            '<button class="service-editor-btn" onclick="duplicateService(\'' + service.id + '\')">📋</button>' +
                            '<button class="service-editor-btn delete" onclick="deleteService(\'' + service.id + '\')">🗑️</button>' +
                        '</div>' +
                    '</div>' +
                    '<div class="service-editor-row">' +
                        '<input type="text" class="service-editor-input" placeholder="Titre du service" value="' + service.title + '" onchange="updateServiceField(\'' + service.id + '\', \'title\', this.value)">' +
                        '<input type="text" class="service-editor-input" placeholder="Prix (ex: 85€)" value="' + service.price + '" onchange="updateServiceField(\'' + service.id + '\', \'price\', this.value)">' +
                    '</div>' +
                    '<div class="service-editor-row">' +
                        '<input type="text" class="service-editor-input" placeholder="Label prix (ex: À partir de)" value="' + service.priceLabel + '" onchange="updateServiceField(\'' + service.id + '\', \'priceLabel\', this.value)">' +
                        '<div style="display: flex; gap: 8px; align-items: center;">' +
                            '<input type="color" class="service-editor-color" value="' + service.color + '" onchange="updateServiceField(\'' + service.id + '\', \'color\', this.value)">' +
                            '<span style="font-size: 20px; cursor: pointer;" onclick="toggleIconPicker(\'' + service.id + '\')">' + service.icon + '</span>' +
                        '</div>' +
                    '</div>' +
                    '<div class="service-editor-row service-editor-full">' +
                        '<textarea class="service-editor-input service-editor-textarea" placeholder="Description du service" onchange="updateServiceField(\'' + service.id + '\', \'description\', this.value)">' + service.description + '</textarea>' +
                    '</div>' +
                    '<div class="service-editor-row service-editor-full">' +
                        '<input type="text" class="service-editor-input" placeholder="Fonctionnalités (séparées par des virgules)" value="' + service.features.join(', ') + '" onchange="updateServiceFeatures(\'' + service.id + '\', this.value)">' +
                    '</div>' +
                    '<div id="iconPicker_' + service.id + '" class="service-editor-icon-picker" style="display: none;"></div>';
                
                container.appendChild(serviceDiv);
            });
        }
        
        function addNewService() {
            var newService = {
                id: 'service_' + Date.now(),
                title: 'Nouveau Service',
                description: 'Description du nouveau service.',
                price: '85€',
                priceLabel: 'À partir de',
                icon: '⚙️',
                color: config.design.color,
                features: ['Devis gratuit', 'Service professionnel']
            };
            
            config.company.servicesAdvanced.push(newService);
            renderServicesEditor();
            updatePreview();
            updateStatus('Nouveau service ajouté !');
        }
        
        function deleteService(serviceId) {
            if (config.company.servicesAdvanced.length <= 1) {
                alert('Vous devez garder au moins un service !');
                return;
            }
            
            if (confirm('Êtes-vous sûr de vouloir supprimer ce service ?')) {
                config.company.servicesAdvanced = config.company.servicesAdvanced.filter(function(service) {
                    return service.id !== serviceId;
                });
                renderServicesEditor();
                updatePreview();
                updateStatus('Service supprimé !');
            }
        }
        
        function duplicateService(serviceId) {
            var serviceIndex = config.company.servicesAdvanced.findIndex(function(s) { return s.id === serviceId; });
            if (serviceIndex !== -1) {
                var originalService = config.company.servicesAdvanced[serviceIndex];
                var duplicatedService = JSON.parse(JSON.stringify(originalService));
                duplicatedService.id = 'service_' + Date.now();
                duplicatedService.title = duplicatedService.title + ' (Copie)';
                
                config.company.servicesAdvanced.splice(serviceIndex + 1, 0, duplicatedService);
                renderServicesEditor();
                updatePreview();
                updateStatus('Service dupliqué !');
            }
        }
        
        function moveServiceUp(serviceId) {
            var serviceIndex = config.company.servicesAdvanced.findIndex(function(s) { return s.id === serviceId; });
            if (serviceIndex > 0) {
                var temp = config.company.servicesAdvanced[serviceIndex];
                config.company.servicesAdvanced[serviceIndex] = config.company.servicesAdvanced[serviceIndex - 1];
                config.company.servicesAdvanced[serviceIndex - 1] = temp;
                renderServicesEditor();
                updatePreview();
            }
        }
        
        function moveServiceDown(serviceId) {
            var serviceIndex = config.company.servicesAdvanced.findIndex(function(s) { return s.id === serviceId; });
            if (serviceIndex < config.company.servicesAdvanced.length - 1) {
                var temp = config.company.servicesAdvanced[serviceIndex];
                config.company.servicesAdvanced[serviceIndex] = config.company.servicesAdvanced[serviceIndex + 1];
                config.company.servicesAdvanced[serviceIndex + 1] = temp;
                renderServicesEditor();
                updatePreview();
            }
        }
        
        function updateServiceField(serviceId, field, value) {
            var service = config.company.servicesAdvanced.find(function(s) { return s.id === serviceId; });
            if (service) {
                service[field] = value;
                if (field === 'title') {
                    renderServicesEditor(); // Re-render pour mettre à jour le titre dans l'en-tête
                }
                updatePreview();
            }
        }
        
        function updateServiceFeatures(serviceId, featuresString) {
            var service = config.company.servicesAdvanced.find(function(s) { return s.id === serviceId; });
            if (service) {
                service.features = featuresString.split(',').map(function(f) { return f.trim(); }).filter(function(f) { return f.length > 0; });
                updatePreview();
            }
        }
        
        function toggleIconPicker(serviceId) {
            var picker = document.getElementById('iconPicker_' + serviceId);
            if (!picker) return;
            
            if (picker.style.display === 'none') {
                // Fermer tous les autres pickers
                document.querySelectorAll('.service-editor-icon-picker').forEach(function(p) {
                    p.style.display = 'none';
                });
                
                // Remplir et afficher ce picker
                picker.innerHTML = '';
                serviceIcons.forEach(function(icon) {
                    var iconDiv = document.createElement('div');
                    iconDiv.className = 'service-editor-icon-option';
                    iconDiv.textContent = icon;
                    iconDiv.onclick = function() {
                        updateServiceField(serviceId, 'icon', icon);
                        picker.style.display = 'none';
                        renderServicesEditor();
                    };
                    picker.appendChild(iconDiv);
                });
                
                picker.style.display = 'grid';
            } else {
                picker.style.display = 'none';
            }
        }

        function init() {
            updateStatus('Initialisation AWEMA v2.0...');
            
            try {
                initSections();
                generatePalette();
                initBlocs();
                initImageUpload();
                initDevices();
                syncForm();
                initGoogleMaps();
                initAdvancedServicesEditor();
                
                var generateBtn = document.getElementById('generateProject');
                if (generateBtn) {
                    generateBtn.addEventListener('click', generateProject);
                }
                
                var forcePreviewBtn = document.getElementById('forcePreview');
                if (forcePreviewBtn) {
                    forcePreviewBtn.addEventListener('click', function() {
                        console.log('🔄 Bouton Preview Simple cliqué');
                        updatePreview();
                    });
                }
                
                var forcePreviewFullBtn = document.getElementById('forcePreviewFull');
                if (forcePreviewFullBtn) {
                    forcePreviewFullBtn.addEventListener('click', function() {
                        console.log('⚡ Bouton Preview Complète cliqué');
                        updatePreviewFull();
                    });
                }
                
                // Test immédiat
                updatePreview();
                console.log('✅ updatePreview() appelée immédiatement');
                
                // Force test dans 500ms
                setTimeout(function() {
                    updatePreview();
                    updateStatus('AWEMA Studio Pro v2.0 prêt !');
                    console.log('✅ updatePreview() appelée après 500ms');
                }, 500);
                
                // Test des sections
                setTimeout(function() {
                    var firstSection = document.querySelector('.section-header');
                    if (firstSection) {
                        console.log('🔍 Test clic sur première section');
                        firstSection.click();
                    }
                }, 1000);
                
            } catch (error) {
                updateStatus('Erreur: ' + error.message);
                console.error('Erreur init:', error);
            }
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }

        updateStatus('Script chargé');
        console.log('✅ AWEMA v2.0 Ultra Clean Fixed - Interface chargée');
    </script>
</body>
</html>